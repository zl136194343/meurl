(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42f9b05c"],{"0bad8":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"shop-index"},[e("div",{staticClass:"shop-left"},[e("div",{staticClass:"shop-wrap"},[e("div",{staticClass:"head-wrap"},[e("div",{staticClass:"img-wrap"},[e("img",{staticClass:"img-responsive center-block",attrs:{src:t.shopInfo.avatar?t.$img(t.shopInfo.avatar):t.$img(t.defaultShopImage),alt:t.shopInfo.site_name},on:{error:function(s){t.shopInfo.avatar=t.defaultShopImage}}})]),e("h5",[e("span",{staticClass:"ns-text-color"},[t._v(t._s(t.shopInfo.site_name))]),1==t.shopInfo.is_own?e("el-tag",{staticClass:"tag",attrs:{size:"small"}},[t._v("自营")]):t._e()],1)]),e("div",{staticClass:"info-wrap"},[e("div",{staticClass:"item"},[t._v(" 描述相符 "),e("b",[t._v(t._s(t.shopInfo.shop_desccredit))]),t._v("分 ")]),e("div",{staticClass:"item"},[t._v(" 服务态度 "),e("b",[t._v(t._s(t.shopInfo.shop_servicecredit))]),t._v("分 ")]),e("div",{staticClass:"item"},[t._v(" 发货速度 "),e("b",[t._v(t._s(t.shopInfo.shop_deliverycredit))]),t._v("分 ")])]),e("div",{staticClass:"other-info"},[t.shopInfo.telephone?e("div",{staticClass:"tell"},[e("div",{staticClass:"tell-name"},[t._v("电话:")]),e("div",{staticClass:"tell-detail"},[t._v(t._s(t.shopInfo.telephone))])]):t._e(),t.shopInfo.full_address?e("div",{staticClass:"item-info"},[e("div",{staticClass:"item-name"},[t._v("地址:")]),e("div",{staticClass:"item-detail"},[t._v(t._s(t.shopInfo.full_address)+t._s(t.shopInfo.address))])]):t._e()]),e("div",{staticClass:"operation"},[t.hasFollow?e("el-button",{attrs:{size:"medium"},on:{click:t.getIsFollow}},[t._v("取消关注")]):e("el-button",{attrs:{size:"medium"},on:{click:t.getIsFollow}},[t._v("关注店铺")])],1)]),e("div",{staticClass:"shop-goods-search"},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"搜索 商品",size:"medium",maxlength:"50",clearable:""},model:{value:t.keyword,callback:function(s){t.keyword=s},expression:"keyword"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.goGoodsList},slot:"append"})],1)],1),e("div",{staticClass:"shop-goods-cate",class:{border:t.categoryList.length}},t._l(t.categoryList,(function(s){return e("div",{key:s.category_id,staticClass:"item"},[e("div",{staticClass:"menu-name",on:{click:function(e){return t.$router.push({path:"/shop_list",query:{site_id:t.id,shop_category_id:s.category_id}})}}},[t._v(t._s(s.category_name))]),t._l(s.child_list,(function(i){return e("div",{key:i.category_id,staticClass:"submenu",on:{click:function(e){return t.$router.push({path:"/shop_list",query:{site_id:t.id,shop_category_id:s.category_id}})}}},[t._v(t._s(i.category_name))])}))],2)})),0)]),e("div",{staticClass:"shop-right"},[e("div",{staticClass:"content"},[e("div",{staticClass:"shop-banner"},[e("el-carousel",{attrs:{height:"406px"}},t._l(t.adList,(function(s){return e("el-carousel-item",{key:s.adv_id},[e("el-image",{attrs:{src:t.$img(s.adv_image),fit:"cover"},on:{click:function(e){return t.$router.pushToTab(s.adv_url.url)}}})],1)})),1)],1),t.goodsList.length?e("div",{staticClass:"tj"},[e("h5",[t._v("本店推荐")])]):t._e(),e("div",{staticClass:"goods-info"},t._l(t.goodsList,(function(s,i){return e("div",{key:s.goods_id,staticClass:"item",on:{click:function(e){return t.$router.pushToTab({path:"/sku-"+s.sku_id})}}},[e("img",{staticClass:"img-wrap",attrs:{src:t.$img(s.sku_image,{size:"mid"})},on:{error:function(s){return t.imageError(i)}}}),e("div",{staticClass:"goods-name"},[t._v(t._s(s.goods_name))]),e("div",{staticClass:"price-wrap"},[e("div",{staticClass:"price"},[e("p",[t._v("￥")]),t._v(" "+t._s(s.discount_price)+" ")]),e("div",{staticClass:"market-price"},[t._v("￥"+t._s(s.market_price))])]),1==s.promotion_type?e("div",{staticClass:"promotion_type"},[t._v("限时折扣")]):t._e()])})),0),e("div",{staticClass:"pager"},[e("el-pagination",{attrs:{background:"","pager-count":5,total:t.total,"prev-text":"上一页","next-text":"下一页","current-page":t.currentPage,"page-size":t.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(s){t.currentPage=s},"update:current-page":function(s){t.currentPage=s},"update:pageSize":function(s){t.pageSize=s},"update:page-size":function(s){t.pageSize=s},"size-change":t.handlePageSizeChange,"current-change":t.handleCurrentPageChange}})],1)])])])])},a=[],o=(e("ac1f"),e("5319"),e("5530")),n=e("8dd4"),c=e("a2a9"),r=e("2f62"),d=e("37cb"),l={name:"shop_index",components:{},data:function(){return{id:0,currentPage:1,pageSize:12,shopInfo:{},hasFollow:!1,searchContent:"",categoryList:[],goodsList:[],total:0,loading:!0,keyword:"",adList:[]}},computed:Object(o["a"])({},Object(r["b"])(["token","defaultShopImage","addonIsExit","defaultGoodsImage"])),created:function(){this.id=this.$route.path.replace("/shop-",""),this.getAdList(),this.getShopInfo(),this.getCategoryList(),this.getGoodsList(),this.getfollow()},watch:{$route:function(t){this.id=t.params.pathMatch,this.getAdList(),this.getShopInfo(),this.getCategoryList(),this.getGoodsList(),this.getfollow()}},methods:{getAdList:function(){var t=this;Object(d["a"])({keyword:"NS_PC_SHOP_INDEX"}).then((function(s){t.adList=s.data.adv_list;for(var e=0;e<t.adList.length;e++)t.adList[e].adv_url&&(t.adList[e].adv_url=JSON.parse(t.adList[e].adv_url))})).catch((function(t){return t}))},getShopInfo:function(){var t=this;Object(n["c"])({site_id:this.id}).then((function(s){0==s.code&&(t.shopInfo=s.data)})).catch((function(s){t.loading=!1,t.$message.error(s.message)}))},getCategoryList:function(){var t=this;Object(n["d"])({site_id:this.id}).then((function(s){t.categoryList=s.data})).catch((function(s){t.loading=!1,t.$message.error(s.message)}))},getGoodsList:function(){var t=this,s={page:this.currentPage,page_size:this.pageSize,site_id:this.id,keyword:this.keyword,sort:"desc"};Object(c["h"])(s||{}).then((function(s){if(0==s.code&&s.data){var e=s.data;t.goodsList=e.list,t.total=s.data.count,t.loading=!1}})).catch((function(s){t.loading=!1,t.$message.error(s.message)}))},getfollow:function(){var t=this;Object(n["b"])({site_id:this.id}).then((function(s){t.hasFollow=s.data})).catch((function(t){}))},getIsFollow:function(){var t=this;this.hasFollow?Object(n["e"])({site_id:this.id}).then((function(s){0==s.code&&s.data&&(t.hasFollow=!t.hasFollow,t.$message({message:"取消关注成功",type:"success"}))})):Object(n["a"])({site_id:this.id}).then((function(s){0==s.code&&s.data&&(t.hasFollow=!t.hasFollow,t.$message({message:"关注成功",type:"success"}))}))},goGoodsList:function(){this.$router.push({path:"/shop_list",query:{site_id:this.id,keyword:this.keyword}})},handlePageSizeChange:function(t){this.pageSize=t,this.getGoodsList()},handleCurrentPageChange:function(t){this.currentPage=t,this.getGoodsList()},imageError:function(t){this.goodsList[t].sku_image=this.defaultGoodsImage}}},h=l,u=(e("7b45"),e("2877")),g=Object(u["a"])(h,i,a,!1,null,"749a3c4a",null);s["default"]=g.exports},"7b45":function(t,s,e){"use strict";var i=e("7e42"),a=e.n(i);a.a},"7e42":function(t,s,e){}}]);
//# sourceMappingURL=chunk-42f9b05c.67c198f2.js.map