(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6eafa282"],{"08f9":function(e,t,s){"use strict";s.d(t,"e",(function(){return a})),s.d(t,"a",(function(){return o})),s.d(t,"d",(function(){return n})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return r})),s.d(t,"f",(function(){return c}));var i=s("751a");function a(e){return Object(i["a"])({url:"/seckill/api/ordercreate/payment",data:e,forceLogin:!0})}function o(e){return Object(i["a"])({url:"/seckill/api/ordercreate/calculate",data:e,forceLogin:!0})}function n(e){return Object(i["a"])({url:"/seckill/api/ordercreate/create",data:e,forceLogin:!0})}function l(e){return Object(i["a"])({url:"/seckill/api/seckillgoods/page",data:e})}function r(e){return Object(i["a"])({url:"/seckill/api/seckillgoods/detail",data:e})}function c(e){return Object(i["a"])({url:"/seckill/api/seckill/lists",data:e})}},ab4a:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"goods-detail"},[i("div",{staticClass:"preview-wrap"},[""!=e.goodsSkuDetail.video_url?i("div",{staticClass:"video-player-wrap",class:{show:"video"==e.switchMedia}},[""!=e.goodsSkuDetail.video_url?i("video-player",{ref:"videoPlayer",attrs:{playsinline:!0,options:e.playerOptions},on:{play:function(t){return e.onPlayerPlay(t)},pause:function(t){return e.onPlayerPause(t)},ended:function(t){return e.onPlayerEnded(t)},waiting:function(t){return e.onPlayerWaiting(t)},playing:function(t){return e.onPlayerPlaying(t)},loadeddata:function(t){return e.onPlayerLoadeddata(t)},timeupdate:function(t){return e.onPlayerTimeupdate(t)},canplay:function(t){return e.onPlayerCanplay(t)},canplaythrough:function(t){return e.onPlayerCanplaythrough(t)},statechanged:function(t){return e.playerStateChanged(t)},ready:e.playerReadied}}):e._e(),""!=e.goodsSkuDetail.video_url?i("div",{staticClass:"media-mode"},[i("span",{class:{"ns-bg-color":"video"==e.switchMedia},on:{click:function(t){e.switchMedia="video"}}},[e._v("视频")]),i("span",{class:{"ns-bg-color":"img"==e.switchMedia},on:{click:function(t){e.switchMedia="img"}}},[e._v("图片")])]):e._e()],1):e._e(),i("div",{staticClass:"magnifier-wrap"},[i("pic-zoom",{ref:"PicZoom",attrs:{url:e.$img(e.picZoomUrl),scale:2}})],1),i("div",{staticClass:"spec-items"},[i("span",{staticClass:"left-btn iconfont iconarrow-left-copy",class:{move:e.moveThumbLeft},on:{click:function(t){return e.changeThumbImg("prev")}}}),i("span",{staticClass:"right-btn iconfont iconarrow-right",class:{move:e.moveThumbRight},on:{click:function(t){return e.changeThumbImg("next")}}}),i("ul",{style:{left:30+e.thumbPosition+"px"}},e._l(e.goodsSkuDetail.sku_images,(function(t,s){return i("li",{key:s,class:{selected:e.picZoomUrl==t},on:{mousemove:function(s){e.picZoomUrl=t}}},[i("img",{attrs:{src:e.$img(t,{size:"small"})},on:{error:function(t){return e.imageErrorSpec(s)}}})])})),0)]),i("div",{staticClass:"share-collect"},[i("div",{on:{click:e.editCollection}},[i("i",{staticClass:"iconfont",class:1==e.whetherCollection?"iconlikefill ns-text-color":"iconlike"}),i("span",{staticClass:"focus-text",attrs:{"data-collects":"0"}},[e._v("关注商品（"+e._s(e.goodsSkuDetail.collect_num)+"）")])]),i("div",{on:{click:e.service_link}},[i("i",{staticClass:"iconfont iconzhanghao"}),i("span",{attrs:{"data-collects":"0"}},[e._v("联系客服")])])])]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"basic-info-wrap"},[i("h1",[e._v(e._s(e.goodsSkuDetail.sku_name))]),e.goodsSkuDetail.introduction?i("p",{staticClass:"desc ns-text-color"},[e._v(e._s(e.goodsSkuDetail.introduction))]):e._e(),e.seckillTimeMachine.currentTime?i("div",{staticClass:"discount-banner ns-bg-color"},[e._m(0),i("div",{staticClass:"surplus-time"},[i("span",[e._v(e._s(e.seckillText))]),i("count-down",{staticClass:"count-down",attrs:{currentTime:e.seckillTimeMachine.currentTime,startTime:e.seckillTimeMachine.startTime,endTime:e.seckillTimeMachine.endTime,dayTxt:"天",hourTxt:"小时",minutesTxt:"分钟",secondsTxt:"秒"},on:{start_callback:function(t){return e.countDownS_cb()},end_callback:function(t){return e.countDownE_cb()}}})],1)]):e._e(),i("div",{staticClass:"item-block"},[i("div",{staticClass:"promotion-price"},[i("dl",{staticClass:"item-line"},[i("dt",{staticClass:"ns-text-color-gray"},[e._v("秒杀价")]),i("dd",[i("em",{staticClass:"yuan ns-text-color"},[e._v("¥")]),i("span",{staticClass:"price ns-text-color"},[e._v(e._s(e.goodsSkuDetail.seckill_price))])])]),i("dl",{staticClass:"item-line"},[i("dt",{staticClass:"ns-text-color-gray"},[e._v("原价")]),i("dd",[i("em",{staticClass:"market-yuan"},[e._v("¥")]),i("span",{staticClass:"market-price"},[e._v(e._s(e.goodsSkuDetail.price))])])]),i("div",{staticClass:"statistical"},[i("ul",[i("li",[i("p",[e._v("累计评价")]),i("span",[e._v(e._s(e.goodsSkuDetail.evaluate))])]),i("li",[i("p",[e._v("累计销量")]),i("span",[e._v(e._s(e.goodsSkuDetail.sale_num)+e._s(e.goodsSkuDetail.unit))])])])]),0==e.goodsSkuDetail.is_virtual?i("dl",{staticClass:"item-line"},[i("dt",[e._v("运费")]),i("dd",[e.goodsSkuDetail.is_free_shipping?i("i",{staticClass:"i-activity-flag ns-text-color ns-border-color"},[e._v("快递免邮")]):i("i",{staticClass:"i-activity-flag ns-text-color ns-border-color"},[e._v("快递不免邮")])])]):e._e()])]),0==e.goodsSkuDetail.is_virtual?i("dl",{staticClass:"item-line delivery"},[i("dt",[e._v("配送至")]),i("dd",[i("div",{staticClass:"region-selected ns-border-color-gray"},[i("span",[e.selectedAddress["level_1"]?[e._l(e.selectedAddress,(function(t){return[e._v(" "+e._s(t.name)+" ")]}))]:[e._v(" 请选择配送地址 ")]],2),i("i",{staticClass:"el-icon-arrow-down"})]),i("div",{staticClass:"region-list ns-border-color-gray",class:{hide:e.hideRegion}},[i("ul",{staticClass:"nav-tabs"},[i("li",{class:{active:"province"==e.currTabAddres},on:{click:function(t){e.currTabAddres="province"}}},[i("div",[i("span",[e._v(e._s(e.selectedAddress["level_1"]?e.selectedAddress["level_1"].name:"请选择省"))]),i("i",{staticClass:"el-icon-arrow-down"})])]),i("li",{class:{active:"city"==e.currTabAddres},on:{click:function(t){e.currTabAddres="city"}}},[i("div",[i("span",[e._v(e._s(e.selectedAddress["level_2"]?e.selectedAddress["level_2"].name:"请选择市"))]),i("i",{staticClass:"el-icon-arrow-down"})])]),i("li",{class:{active:"district"==e.currTabAddres},on:{click:function(t){e.currTabAddres="district"}}},[i("div",[i("span",[e._v(e._s(e.selectedAddress["level_3"]?e.selectedAddress["level_3"].name:"请选择区/县"))]),i("i",{staticClass:"el-icon-arrow-down"})])])]),i("div",{staticClass:"tab-content"},[i("div",{staticClass:"tab-pane",class:{active:"province"==e.currTabAddres}},[i("ul",{staticClass:"province"},e._l(e.provinceArr,(function(t,s){return i("li",{key:s,class:{selected:e.selectedAddress["level_"+t.level]&&e.selectedAddress["level_"+t.level].id==t.id}},[i("span",{on:{click:function(s){return e.getAddress("city",t)}}},[e._v(e._s(t.name))])])})),0)]),i("div",{staticClass:"tab-pane",class:{active:"city"==e.currTabAddres}},[i("ul",{staticClass:"city"},e._l(e.cityArr,(function(t,s){return i("li",{key:s,class:{selected:e.selectedAddress["level_"+t.level]&&e.selectedAddress["level_"+t.level].id==t.id}},[i("span",{on:{click:function(s){return e.getAddress("district",t)}}},[e._v(e._s(t.name))])])})),0)]),i("div",{staticClass:"tab-pane",class:{active:"district"==e.currTabAddres}},[i("ul",{staticClass:"district"},e._l(e.districtArr,(function(t,s){return i("li",{key:s,class:{selected:e.selectedAddress["level_"+t.level]&&e.selectedAddress["level_"+t.level].id==t.id}},[i("span",{on:{click:function(s){return e.getAddress("community",t)}}},[e._v(e._s(t.name))])])})),0)])])])])]):e._e(),i("dl",{staticClass:"item-line service"},[i("dt",[e._v("服务")]),i("dd",[i("span",[e._v(" 由 "),i("router-link",{staticClass:"ns-text-color",attrs:{to:"/shop-"+e.shopInfo.site_id}},[e._v(e._s(e.shopInfo.site_name))]),e._v(" 发货并提供售后服务 ")],1)])]),i("hr",{staticClass:"divider"}),e.goodsSkuDetail.goods_spec_format?i("div",{staticClass:"sku-list"},e._l(e.goodsSkuDetail.goods_spec_format,(function(t,s){return i("dl",{key:s,staticClass:"item-line"},[i("dt",[e._v(e._s(t.spec_name))]),i("dd",[i("ul",e._l(t.value,(function(t,s){return i("li",{key:s},[i("div",{class:{"selected ns-border-color":t["selected"]||e.skuId==t.sku_id,disabled:t["disabled"]||!t["selected"]&&t["disabled"]},on:{click:function(s){return e.changeSpec(t.sku_id,t.spec_id)}}},[t.image?i("img",{attrs:{src:e.$img(t.image,{size:"small"})}}):e._e(),i("span",[e._v(e._s(t.spec_value_name))]),i("i",{staticClass:"iconfont iconduigou1 ns-text-color"})])])})),0)])])})),0):e._e(),i("div",{staticClass:"buy-number"},[i("dl",{staticClass:"item-line"},[i("dt",[e._v("数量")]),i("dd",[i("div",{staticClass:"num-wrap"},[i("el-input",{attrs:{placeholder:"0"},on:{input:function(t){return e.keyInput(!1)},blur:e.blur},model:{value:e.number,callback:function(t){e.number=t},expression:"number"}}),i("div",{staticClass:"operation"},[i("span",{staticClass:"increase el-icon-caret-top",on:{click:function(t){return e.changeNum("+")}}}),i("span",{staticClass:"decrease el-icon-caret-bottom",on:{click:function(t){return e.changeNum("-")}}})])],1),i("span",{staticClass:"unit"},[e._v(e._s(e.goodsSkuDetail.unit))]),i("span",{staticClass:"inventory"},[e._v("库存"+e._s(e.goodsSkuDetail.stock)+e._s(e.goodsSkuDetail.unit))])])])]),i("dl",{staticClass:"item-line buy-btn"},[i("dt"),i("dd",[1==e.goodsSkuDetail.goods_state&&1==e.goodsSkuDetail.verify_state?[i("el-button",{attrs:{type:"primary",plain:""},on:{click:e.buyNow}},[e._v("立即抢购")])]:[i("el-button",{attrs:{type:"info",plain:"",disabled:""}},[e._v("该商品已下架")])],i("div",{staticClass:"go-phone",attrs:{href:"javascript:;"}},[i("img",{attrs:{src:s("5d2e")}}),i("div",{staticClass:"qrcode-wrap"},[i("img",{attrs:{src:e.qrcode,alt:"二维码图片"}})])])],2)]),i("dl",{directives:[{name:"show",rawName:"v-show",value:1==e.shopInfo.shop_baozh||1==e.shopInfo.shop_qtian||1==e.shopInfo.shop_zhping||1==e.shopInfo.shop_erxiaoshi||1==e.shopInfo.shop_tuihuo||1==e.shopInfo.shop_shiyong||1==e.shopInfo.shop_shiti||1==e.shopInfo.shop_xiaoxie,expression:"shopInfo.shop_baozh == 1 || shopInfo.shop_qtian == 1 || shopInfo.shop_zhping == 1 || shopInfo.shop_erxiaoshi == 1 || shopInfo.shop_tuihuo == 1 || shopInfo.shop_shiyong == 1 || shopInfo.shop_shiti == 1 || shopInfo.shop_xiaoxie == 1"}],staticClass:"item-line merchant-service"},[i("dt",[e._v("商家服务")]),i("div",[1==e.shopInfo.shop_baozh?i("dd",[i("i",{staticClass:"el-icon-success"}),i("span",{staticClass:"ns-text-color-gray",attrs:{title:"保证服务"}},[e._v("保证服务")])]):e._e(),1==e.shopInfo.shop_qtian?i("dd",[i("i",{staticClass:"el-icon-success"}),i("span",{staticClass:"ns-text-color-gray",attrs:{title:"满足7天无理由退换货申请的前提下，包邮商品需要买家承担退货邮费，非包邮商品需要买家承担发货和退货邮费"}},[e._v("7天退换")])]):e._e(),1==e.shopInfo.shop_zhping?i("dd",[i("i",{staticClass:"el-icon-success"}),i("span",{staticClass:"ns-text-color-gray",attrs:{title:"商品支持正品保障服务"}},[e._v("正品保障")])]):e._e(),1==e.shopInfo.shop_erxiaoshi?i("dd",[i("i",{staticClass:"el-icon-success"}),i("span",{staticClass:"ns-text-color-gray",attrs:{title:"付款后2小时内发货"}},[e._v("两小时发货")])]):e._e(),1==e.shopInfo.shop_tuihuo?i("dd",[i("i",{staticClass:"el-icon-success"}),i("span",{staticClass:"ns-text-color-gray",attrs:{title:"退货承诺"}},[e._v("退货承诺")])]):e._e(),1==e.shopInfo.shop_shiyong?i("dd",[i("i",{staticClass:"el-icon-success"}),i("span",{staticClass:"ns-text-color-gray",attrs:{title:"试用中心"}},[e._v("试用中心")])]):e._e(),1==e.shopInfo.shop_shiti?i("dd",[i("i",{staticClass:"el-icon-success"}),i("span",{staticClass:"ns-text-color-gray",attrs:{title:"实体验证"}},[e._v("实体验证")])]):e._e(),1==e.shopInfo.shop_xiaoxie?i("dd",[i("i",{staticClass:"el-icon-success"}),i("span",{staticClass:"ns-text-color-gray",attrs:{title:"如有商品质量问题、描述不符或未收到货等，您有权申请退款或退货，来回邮费由卖家承担"}},[e._v("消协保证")])]):e._e()])])]),i("div",{staticClass:"shop-wrap"},[i("div",{staticClass:"head-wrap"},[i("div",{staticClass:"img-wrap"},[i("img",{staticClass:"img-responsive center-block",attrs:{src:e.shopInfo.avatar?e.$img(e.shopInfo.avatar):e.$img(e.defaultShopImage),alt:e.shopInfo.site_name},on:{error:function(t){e.shopInfo.avatar=e.defaultShopImage}}})]),i("h5",[i("span",{staticClass:"site-name"},[e._v(e._s(e.shopInfo.site_name))]),1==e.shopInfo.is_own?i("el-tag",{staticClass:"tag",attrs:{size:"small"}},[e._v("自营")]):e._e()],1)]),i("div",{staticClass:"info-wrap"},[i("dl",[i("dt",{staticClass:"site-score"},[e._v("店铺评分")]),i("dd",[i("el-rate",{attrs:{disabled:""},model:{value:e.score,callback:function(t){e.score=t},expression:"score"}})],1),i("dt",[e._v("商品描述：")]),i("dd",[i("span",[e._v(e._s(e.shopInfo.shop_desccredit))]),e._v("分")]),i("dt",[e._v("卖家服务：")]),i("dd",[i("span",[e._v(e._s(e.shopInfo.shop_servicecredit))]),e._v("分")]),i("dt",[e._v("发货速度：")]),i("dd",[i("span",[e._v(e._s(e.shopInfo.shop_deliverycredit))]),e._v("分")])])]),e.shopInfo.telephone?i("div",{staticClass:"info-wrap"},[i("dl",[i("dt",[e._v("联系电话：")]),i("dd",[e._v(e._s(e.shopInfo.telephone))])])]):e._e(),i("div",{staticClass:"operation"},[i("el-button",{staticClass:"btn btn-default",attrs:{size:"medium"},on:{click:function(t){return e.$router.pushToTab("/shop-"+e.shopInfo.site_id)}}},[e._v("进店逛逛")]),e.hasFollow?i("el-button",{attrs:{size:"medium"},on:{click:e.follow}},[e._v("取消关注")]):i("el-button",{attrs:{size:"medium"},on:{click:e.follow}},[e._v("关注店铺")])],1)]),i("div",{staticClass:"detail-wrap"},[i("div",{staticClass:"goods-recommended"},[i("goods-recommend")],1),i("el-tabs",{staticClass:"goods-tab",attrs:{type:"card"},on:{"tab-click":e.tabChange},model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[i("el-tab-pane",{attrs:{label:"商品详情",name:"detail"}},[i("div",{domProps:{innerHTML:e._s(e.goodsSkuDetail.goods_content)}})]),i("el-tab-pane",{attrs:{label:"商品属性",name:"attr"}},[i("ul",{staticClass:"attr-list"},[e.goodsSkuDetail.goods_attr_format&&e.goodsSkuDetail.goods_attr_format.length>0?e._l(e.goodsSkuDetail.goods_attr_format,(function(t,s){return i("li",{key:s},[e._v(e._s(t.attr_name)+"："+e._s(t.attr_value_name))])})):e._e()],2)]),i("el-tab-pane",{staticClass:"evaluate",attrs:{label:e.goodsSkuDetail.evaluate?"商品评价("+e.goodsSkuDetail.evaluate+")":"商品评价",name:"evaluate"}},[e.goodsEvaluateList.length?[i("nav",[i("li",{staticClass:"selected"},[e._v("全部评价")])]),i("ul",{staticClass:"list"},e._l(e.goodsEvaluateList,(function(t,s){return i("li",{key:s},[i("div",{staticClass:"member-info"},[i("img",{staticClass:"avatar",attrs:{src:e.$img(t.member_headimg)},on:{error:function(t){return e.imageErrorEvaluate(s)}}}),i("span",[e._v(e._s(t.member_name))])]),i("div",{staticClass:"info-wrap"},[i("el-rate",{attrs:{disabled:""},model:{value:t.star,callback:function(s){e.$set(t,"star",s)},expression:"item.star"}}),i("p",{staticClass:"content"},[e._v(e._s(t.content))]),t.images?i("div",{staticClass:"img-list"},e._l(t.images,(function(s,a){return i("el-image",{key:a,attrs:{src:e.$img(s),"preview-src-list":t.imagesFormat}})})),1):e._e(),i("div",{staticClass:"sku-info"},[i("span",[e._v(e._s(t.sku_name))]),i("span",{staticClass:"create-time"},[e._v(e._s(e.$util.timeStampTurnTime(t.create_time)))])]),""!=t.explain_first?i("div",{staticClass:"evaluation-reply"},[e._v("店家回复："+e._s(t.explain_first))]):e._e(),""!=t.again_content?[i("div",{staticClass:"review-evaluation"},[i("span",[e._v("追加评价")]),i("span",{staticClass:"review-time"},[e._v(e._s(e.$util.timeStampTurnTime(t.again_time)))])]),i("p",{staticClass:"content"},[e._v(e._s(t.again_content))]),i("div",{staticClass:"img-list"},e._l(t.again_images,(function(s,a){return i("el-image",{key:a,attrs:{src:e.$img(s),"preview-src-list":t.againImagesFormat}})})),1),""!=t.again_explain?i("div",{staticClass:"evaluation-reply"},[e._v("店家回复："+e._s(t.again_explain))]):e._e()]:e._e()],2)])})),0),i("div",{staticClass:"pager"},[i("el-pagination",{attrs:{background:"","pager-count":5,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-size":e.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handlePageSizeChange,"current-change":e.handleCurrentPageChange}})],1)]:i("div",{staticClass:"empty"},[e._v("该商品暂无评价哦")])],2)],1)],1),i("servicerMessage",{ref:"servicerMessage",staticClass:"kefu",attrs:{shop:{shop_id:e.shopInfo.site_id,logo:e.shopInfo.logo,shop_name:e.shopInfo.site_name}}})],1)},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"activity-name"},[s("i",{staticClass:"discount-icon iconfont iconicon_naozhong"}),s("span",[e._v("限时秒杀")])])}],o=s("86bd"),n=(s("99af"),s("a9e3"),s("b680"),s("ac1f"),s("5319"),s("1276"),s("5530")),l=s("a2a9"),r=s("08f9"),c=s("2f84"),d=s("0091"),u=s("2f62"),g=s("0dec"),_=s.n(g),p=s("e692"),m=s("2f94"),h=s("37cb"),v={data:function(){return{id:0,skuId:0,loading:!0,picZoomUrl:"",thumbPosition:0,moveThumbLeft:!1,moveThumbRight:!1,goodsSkuDetail:{video_url:""},seckillText:"距离结束仅剩",seckillTimeMachine:{currentTime:0,startTime:0,endTime:0},qrcode:"",shopInfo:{},whetherCollection:0,score:0,currentPage:1,pageSize:10,total:0,goodsEvaluateList:[],service:null,number:1,tabName:"detail",playerOptions:{playbackRates:[.5,1,1.5,2,3],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],poster:"",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!0,fullscreenToggle:!0}},switchMedia:"img",hasFollow:!1,provinceArr:{},cityArr:{},districtArr:{},currTabAddres:"province",hideRegion:!1,selectedAddress:{},specBtnRepeat:!1,serverType:"disable",serverThird:""}},components:{CountDown:_.a},created:function(){var e=this;this.id=this.$route.path.replace("/promotion/seckill-",""),this.addonIsExit&&1!=this.addonIsExit.seckill?this.$message({message:"秒杀插件未安装",type:"warning",duration:2e3,onClose:function(){e.$route.push("/")}}):this.getGoodsSkuDetail(),this.shopServiceOpen()},computed:Object(n["a"])({},Object(u["b"])(["token","defaultHeadImage","defaultShopImage","addonIsExit","locationRegion"])),watch:{$route:function(e){var t=this;this.id=e.params.pathMatch,this.addonIsExit&&1==this.addonIsExit.seckill?this.getGoodsSkuDetail():this.$message({message:"秒杀插件未安装",type:"warning",duration:2e3,onClose:function(){t.$route.push("/")}})},addonIsExit:function(){var e=this;1!=this.addonIsExit.seckill&&this.$message({message:"秒杀插件未安装",type:"warning",duration:2e3,onClose:function(){e.$route.push("/")}})}},methods:{shopServiceOpen:function(){var e=this;Object(h["g"])().then((function(t){0==t.code&&("third"==t.data.type?(e.serverType=t.data.type,e.serverThird=t.data.third):"system"==t.data.type&&(e.serverType=t.data.type,e.serverThird=""))}))},tabChange:function(e,t){},bundlingChange:function(e,t){},getGoodsSkuDetail:function(){var e=this;Object(r["c"])({seckill_id:this.id}).then((function(t){console.log(t,"res");var s=t.data;if(null!=s.goods_sku_detail){e.goodsSkuDetail=s.goods_sku_detail,e.shopInfo=s.shop_info;var i=(Number(e.shopInfo.shop_desccredit)+Number(e.shopInfo.shop_servicecredit)+Number(e.shopInfo.shop_deliverycredit))/3;e.score=Number(i.toFixed(1)),e.skuId=e.goodsSkuDetail.sku_id;var a=new Date(1e3*t.timestamp),o=60*a.getHours()*60+60*a.getMinutes()+a.getSeconds();if(e.goodsSkuDetail.seckill_start_time<=o&&o<e.goodsSkuDetail.seckill_end_time){var n=parseInt(a.getTime()/1e3)+(e.goodsSkuDetail.seckill_end_time-o);e.seckillTimeMachine={currentTime:t.timestamp,startTime:t.timestamp,endTime:n}}else e.goodsSkuDetail.seckill_start_time>o&&o<e.goodsSkuDetail.seckill_end_time?e.$message({message:"限时秒杀活动还未开始",type:"warning",duration:2e3,onClose:function(){e.$router.push("/sku-"+e.goodsSkuDetail.sku_id)}}):o<e.goodsSkuDetail.seckill_start_time&&o>e.goodsSkuDetail.seckill_end_time&&e.$message({message:"限时秒杀活动已结束",type:"warning",duration:2e3,onClose:function(){e.$router.push("/sku-"+e.goodsSkuDetail.sku_id)}});if(e.goodsSkuDetail.sku_images?e.goodsSkuDetail.sku_images=e.goodsSkuDetail.sku_images.split(","):e.goodsSkuDetail.sku_images=[],e.goodsSkuDetail.goods_spec_format&&e.goodsSkuDetail.goods_image&&(e.goodsSkuDetail.goods_image=e.goodsSkuDetail.goods_image.split(","),e.goodsSkuDetail.sku_images=e.goodsSkuDetail.sku_images.concat(e.goodsSkuDetail.goods_image)),e.goodsSkuDetail.video_url&&(e.switchMedia="video",e.playerOptions.poster=img(e.goodsSkuDetail.sku_images[0]),e.playerOptions.sources[0].src=img(e.goodsSkuDetail.video_url)),e.picZoomUrl=e.goodsSkuDetail.sku_images[0],e.goodsSkuDetail.unit=e.goodsSkuDetail.unit||"件",e.goodsSkuDetail.sku_spec_format&&(e.goodsSkuDetail.sku_spec_format=JSON.parse(e.goodsSkuDetail.sku_spec_format)),e.goodsSkuDetail.goods_attr_format){var l=JSON.parse(e.goodsSkuDetail.goods_attr_format);e.goodsSkuDetail.goods_attr_format=e.$util.unique(l,"attr_id");for(var r=0;r<e.goodsSkuDetail.goods_attr_format.length;r++)for(var c=0;c<l.length;c++)e.goodsSkuDetail.goods_attr_format[r].attr_id==l[c].attr_id&&e.goodsSkuDetail.goods_attr_format[r].attr_value_id!=l[c].attr_value_id&&(e.goodsSkuDetail.goods_attr_format[r].attr_value_name+="、"+l[c].attr_value_name)}e.goodsSkuDetail.goods_spec_format&&(e.goodsSkuDetail.goods_spec_format=JSON.parse(e.goodsSkuDetail.goods_spec_format)),window.document.title="".concat(e.goodsSkuDetail.sku_name," - ").concat(window.document.title),e.loading=!1}else e.$router.push("/")})).then((function(t){""!=e.token&&(e.getWhetherCollection(),e.isFollow()),e.modifyGoodsInfo(),e.getGoodsEvaluate(),e.getGoodsQrcode(),e.getAddress("province",null,!0),e.locationRegion||e.$store.commit("app/SET_LOCATION_REGION",{level_1:{id:11e4,pid:0,name:"北京市",shortname:"北京",longitude:"116.40529",latitude:"39.904987",level:1,sort:1,status:1,default_data:1},level_2:{id:110100,pid:11e4,name:"北京市",shortname:"北京",longitude:"116.40529",latitude:"39.904987",level:2,sort:1,status:1,default_data:1},level_3:{id:110101,pid:110100,name:"东城区",shortname:"东城",longitude:"116.418755",latitude:"39.917545",level:3,sort:3,status:1,default_data:1}}),e.selectedAddress=e.locationRegion,e.provinceId=e.selectedAddress.level_1.id,e.getAddress("city",null,!0,(function(){e.cityId=e.selectedAddress.level_2.id,e.cityId&&e.getAddress("district",null,!0)}))})).catch((function(t){e.loading=!1,e.$router.push("/")}))},changeSpec:function(e,t){var s=this;this.specBtnRepeat=!1,this.skuId=e;for(var i=0;i<this.goodsSkuDetail.goods_spec_format.length;i++)for(var a=this.goodsSkuDetail.goods_spec_format[i],o=0;o<a.value.length;o++)t==this.goodsSkuDetail.goods_spec_format[i].value[o].spec_id&&(this.goodsSkuDetail.goods_spec_format[i].value[o].selected=!1);Object(l["g"])({sku_id:this.skuId}).then((function(e){var t=e.data;null!=t?(""!=t.sku_images?(t.sku_images=t.sku_images.split(","),s.picZoomUrl=t.sku_images[0]):t.sku_images=s.goodsSkuDetail.sku_images,t.unit="件",s.playerOptions.poster=img(t.sku_images[0]),t.sku_spec_format&&(t.sku_spec_format=JSON.parse(t.sku_spec_format)),t.goods_spec_format&&(t.goods_spec_format=JSON.parse(t.goods_spec_format)),s.keyInput(!0),1==t.promotion_type&&(s.discountTimeMachine={currentTime:e.timestamp,startTime:e.timestamp,endTime:t.end_time}),s.specBtnRepeat=!1,Object.assign(s.goodsSkuDetail,t)):s.$router.push("/")}))},service_link:function(){this.token?"third"==this.serverType?window.open(this.serverThird,"_blank"):"system"==this.serverType&&this.$refs.servicerMessage.show():this.$message({message:"您还未登录",type:"warning"})},changeThumbImg:function(e){if(!(this.goodsSkuDetail.sku_images.length<4)){var t=this.goodsSkuDetail.sku_images.length%4,s=88;if(0==t)t=this.goodsSkuDetail.sku_images.length-4;else if(0!=t&&1!=t&&t<2)return;"prev"==e?0!=this.thumbPosition&&Math.round(this.thumbPosition,2)!=s&&(this.thumbPosition+=s):"next"==e&&Math.round(this.thumbPosition,2)!=-Math.round(s*t,2)&&(this.thumbPosition-=s)}},getWhetherCollection:function(){var e=this;Object(c["c"])({goods_id:this.goodsSkuDetail.goods_id}).then((function(t){e.whetherCollection=t.data}))},editCollection:function(){var e=this;0==this.whetherCollection?Object(c["a"])({sku_id:this.skuId}).then((function(t){var s=t.data;s>0&&(e.whetherCollection=1,e.goodsSkuDetail.collect_num++)})):Object(c["b"])({goods_id:this.goodsSkuDetail.goods_id}).then((function(t){var s=t.data;s>0&&(e.whetherCollection=0,e.goodsSkuDetail.collect_num--)}))},getAftersale:function(){var e=this;Object(l["b"])({}).then((function(t){if(0==t.code&&t.data){t.data.content;t.data.content&&(e.service=t.data.content)}}))},modifyGoodsInfo:function(){Object(l["j"])({sku_id:this.skuId,site_id:this.goodsSkuDetail.site_id}),Object(l["a"])({sku_id:this.skuId})},getGoodsQrcode:function(){var e=this;Object(l["d"])({sku_id:this.skuId}).then((function(t){var s=t.data;s.path.h5.img&&(e.qrcode=img(s.path.h5.img))}))},getGoodsEvaluate:function(){var e=this;Object(d["a"])({page:this.currentPage,page_size:this.pageSize,goods_id:this.goodsSkuDetail.goods_id}).then((function(t){var s=[];t.message;0==t.code&&t.data&&(s=t.data.list,e.total=t.data.count);for(var i=0;i<s.length;i++){if(1==s[i].explain_type?s[i].star=5:2==s[i].explain_type?s[i].star=3:3==s[i].explain_type&&(s[i].star=1),s[i].images){s[i].images=s[i].images.split(","),s[i].imagesFormat=[];for(var a=0;a<s[i].images.length;a++)s[i].imagesFormat.push(img(s[i].images[a]))}if(s[i].again_images){s[i].again_images=s[i].again_images.split(","),s[i].againImagesFormat=[];for(var o=0;o<s[i].again_images.length;o++)s[i].againImagesFormat.push(img(s[i].again_images[o]))}1==s[i].is_anonymous&&(s[i].member_name=s[i].member_name.replace(s[i].member_name.substring(1,s[i].member_name.length-1),"***"))}e.goodsEvaluateList=s}))},imageErrorEvaluate:function(e){this.goodsEvaluateList[e].member_headimg=this.defaultHeadImage},handlePageSizeChange:function(e){this.pageSize=e,this.getGoodsEvaluate()},handleCurrentPageChange:function(e){this.currentPage=e,this.getGoodsEvaluate()},changeNum:function(e){if(0!=this.goodsSkuDetail.stock){var t=this.goodsSkuDetail.stock,s=1;if("+"==e){if(!(this.number<t))return;this.number++}else if("-"==e){if(!(this.number>s))return;this.number-=1}}},blur:function(){var e=this,t=parseInt(this.number);this.number=0,setTimeout((function(){e.number=t}),0)},keyInput:function(e,t){var s=this;setTimeout((function(){var i=s.goodsSkuDetail.stock;0!=s.goodsSkuDetail.stock?(e&&0==s.number.length&&(s.number=1),e&&(s.number<=0||isNaN(s.number))&&(s.number=1),s.number>i&&(s.number=i),e&&(s.number=parseInt(s.number)),t&&t()):s.number=0}),0)},onPlayerPlay:function(e){},onPlayerPause:function(e){},onPlayerEnded:function(e){},onPlayerWaiting:function(e){},onPlayerPlaying:function(e){},onPlayerLoadeddata:function(e){},onPlayerTimeupdate:function(e){},onPlayerCanplay:function(e){},onPlayerCanplaythrough:function(e){},playerStateChanged:function(e){},playerReadied:function(e){},buyNow:function(){var e=this;this.keyInput(!0,(function(){if(0!=e.goodsSkuDetail.stock)if(0!=e.number.length&&0!=e.number){var t={seckill_id:e.goodsSkuDetail.seckill_id,num:e.number,sku_id:e.skuId};e.$store.dispatch("order/setSeckillOrderCreateData",t),e.$router.push({path:"/promotion/seckill_payment"})}else e.$message({message:"购买数量不能为0",type:"warning"});else e.$message({message:"商品已售罄",type:"warning"})}))},countDownS_cb:function(){},countDownE_cb:function(){var e=this;this.seckillText="活动已结束",this.$message({message:"限时秒杀活动已结束",type:"warning",duration:2e3,onClose:function(){e.$router.push("/sku-"+e.goodsSkuDetail.sku_id)}})},isFollow:function(){var e=this;Object(p["c"])({site_id:this.goodsSkuDetail.site_id}).then((function(t){0==t.code&&(e.hasFollow=t.data)}))},follow:function(){var e=this;this.hasFollow?Object(p["b"])({site_id:this.goodsSkuDetail.site_id}).then((function(t){0==t.code&&t.data&&(e.hasFollow=!e.hasFollow,e.$message({message:"取消成功",type:"success"}))})):Object(p["a"])({site_id:this.goodsSkuDetail.site_id}).then((function(t){0==t.code&&t.data&&(e.hasFollow=!e.hasFollow,e.$message({message:"关注成功",type:"success"}))}))},imageErrorSpec:function(e){this.goodsSkuDetail.sku_images[e]=this.defaultGoodsImage,this.picZoomUrl=this.defaultGoodsImage},getAddress:function(e,t,s,i){var a=this,o=0;switch(e){case"province":o=0;break;case"city":t&&(this.provinceId=t.id),o=this.provinceId,this.cityArr={},this.districtArr={};break;case"district":t&&(this.cityId=t.id),o=this.cityId,this.districtArr={};break}if(t){if(t.level<=2)for(var n=t.level,l=n;l<=3;l++)delete this.selectedAddress["level_"+l];this.selectedAddress["level_"+t.level]=t}if(s||this.$store.commit("app/SET_LOCATION_REGION",this.selectedAddress),this.$forceUpdate(),"community"==e)return this.hideRegion=!0,void setTimeout((function(){a.hideRegion=!1}),10);Object(m["a"])({pid:o}).then((function(t){t.code;var s=t.data;if(s){switch(e){case"province":a.provinceArr=s;break;case"city":a.cityArr=s;break;case"district":a.districtArr=s;break}a.currTabAddres=e,i&&i()}})).catch((function(e){}))}}},f=s("a63f"),k=s("628a"),b={name:"seckill_detail",components:{PicZoom:o["a"],GoodsRecommend:f["a"],servicerMessage:k["a"]},mixins:[v]},C=b,y=(s("e907"),s("2877")),S=Object(y["a"])(C,i,a,!1,null,null,null);t["default"]=S.exports},d445:function(e,t,s){},e907:function(e,t,s){"use strict";var i=s("d445"),a=s.n(i);a.a}}]);
//# sourceMappingURL=chunk-6eafa282.bd199e84.js.map