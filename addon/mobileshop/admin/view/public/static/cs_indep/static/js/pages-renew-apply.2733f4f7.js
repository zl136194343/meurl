(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-renew-apply"],{"0ced":function(e,a,t){var n=t("d0dc");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=t("4f06").default;i("383e810d",n,!0,{sourceMap:!1,shadowMode:!1})},"14cf":function(e,a,t){"use strict";t.d(a,"b",(function(){return i})),t.d(a,"c",(function(){return r})),t.d(a,"a",(function(){return n}));var n={loadingCover:t("8f54").default},i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",{staticClass:"authentication-info"},[t("v-uni-view",{staticClass:"company-info info-chunk"},[t("v-uni-view",{staticClass:"apply-input-wrap"},[t("v-uni-text",[e._v("店铺名称")]),t("v-uni-input",{staticClass:"input-content",attrs:{type:"text",disabled:"false"},model:{value:e.infoData.shop_name,callback:function(a){e.$set(e.infoData,"shop_name",a)},expression:"infoData.shop_name"}})],1),t("v-uni-view",{staticClass:"apply-input-wrap"},[t("v-uni-text",[e._v("开店套餐")]),t("v-uni-input",{staticClass:"input-content",attrs:{type:"text",disabled:"false"},model:{value:e.infoData.shop_group_name,callback:function(a){e.$set(e.infoData,"shop_group_name",a)},expression:"infoData.shop_group_name"}})],1),t("v-uni-view",{staticClass:"apply-input-wrap"},[t("v-uni-text",[e._v("主营行业")]),t("v-uni-input",{staticClass:"input-content",attrs:{type:"text",disabled:"false"},model:{value:e.selectCategory,callback:function(a){e.selectCategory=a},expression:"selectCategory"}})],1),t("v-uni-view",{staticClass:"apply-input-wrap more-wrap"},[t("v-uni-text",[e._v("入驻时长")]),e.isRenew?[t("v-uni-picker",{attrs:{mode:"selector",value:e.selectApplyYear.key,range:e.applyYearArr},on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.applyYearChange.apply(void 0,arguments)}}},[t("v-uni-text",{staticClass:"input-content",class:{"color-tip":!e.selectApplyYear.value}},[e._v(e._s(e.selectApplyYear.value?e.selectApplyYear.value:"请选择入驻时长"))]),t("v-uni-text",{staticClass:"iconfont iconright"})],1)]:[t("v-uni-input",{staticClass:"input-content",attrs:{type:"text",disabled:"false"},model:{value:e.selectApplyYear.value,callback:function(a){e.$set(e.selectApplyYear,"value",a)},expression:"selectApplyYear.value"}})]],2),t("v-uni-view",{staticClass:"apply-input-wrap"},[t("v-uni-text",[e._v("服务费")]),t("v-uni-input",{staticClass:"input-content",attrs:{type:"text",placeholder:"0.00 元",disabled:"false"},model:{value:e.applyMoney.paying_apply,callback:function(a){e.$set(e.applyMoney,"paying_apply",a)},expression:"applyMoney.paying_apply"}})],1),t("v-uni-view",{staticClass:"apply-input-wrap"},[t("v-uni-text",[e._v("总计")]),t("v-uni-input",{staticClass:"input-content",attrs:{type:"text",placeholder:"0.00 元",disabled:"false"},model:{value:e.applyMoney.paying_amount,callback:function(a){e.$set(e.applyMoney,"paying_amount",a)},expression:"applyMoney.paying_amount"}})],1)],1),t("v-uni-view",{staticClass:"company-info info-chunk"},[t("v-uni-view",{staticClass:"apply-input-wrap"},[t("v-uni-text",[e._v("付款凭证")]),t("v-uni-view",{staticClass:"input-img",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.uplodImg()}}},[e.payData.paying_money_certificate?t("v-uni-image",{attrs:{src:e.$util.img(e.payData.paying_money_certificate),mode:"aspectFit"}}):t("v-uni-text",{staticClass:"iconfont iconadd1"})],1)],1),t("v-uni-view",{staticClass:"apply-input-wrap"},[t("v-uni-text",[e._v("付款凭证说明")]),t("v-uni-input",{staticClass:"input-content",attrs:{type:"text",placeholder:"请输入付款凭证说明"},model:{value:e.payData.paying_money_certificate_explain,callback:function(a){e.$set(e.payData,"paying_money_certificate_explain",a)},expression:"payData.paying_money_certificate_explain"}})],1)],1),t("v-uni-view",{staticClass:"company-info info-chunk"},[t("v-uni-view",{staticClass:"shroff-account"},[t("v-uni-text",{staticClass:"account-title"},[e._v("收款账户信息")]),t("v-uni-view",{staticClass:"account-content"},[t("v-uni-view",[t("v-uni-text",[e._v("银行开户名：")]),t("v-uni-text",[e._v(e._s(e.infoData.bank_account_name))])],1),t("v-uni-view",[t("v-uni-text",[e._v("银行账户：")]),t("v-uni-text",[e._v(e._s(e.infoData.bank_account_no))])],1),t("v-uni-view",[t("v-uni-text",[e._v("开户名称：")]),t("v-uni-text",[e._v(e._s(e.infoData.bank_name))])],1),t("v-uni-view",[t("v-uni-text",[e._v("开户所在地：")]),t("v-uni-text",[e._v(e._s(e.infoData.bank_address))])],1)],1)],1)],1),t("v-uni-button",{attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.save.apply(void 0,arguments)}}},[e._v("提交")]),t("loading-cover",{ref:"loadingCover"})],1)},r=[]},7245:function(e,a,t){t("c975"),t("a9e3"),t("4d63"),t("ac1f"),t("25f0"),t("1276"),e.exports={error:"",check:function(e,a){for(var t=0;t<a.length;t++){if(!a[t].checkType)return!0;if(!a[t].name)return!0;if(!a[t].errorMsg)return!0;if(!e[a[t].name])return this.error=a[t].errorMsg,!1;switch(a[t].checkType){case"custom":if("function"==typeof a[t].validate&&!a[t].validate(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"required":var n=new RegExp("/[S]+/");if(n.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"string":n=new RegExp("^.{"+a[t].checkRule+"}$");if(!n.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"int":n=new RegExp("^(-[1-9]|[1-9])[0-9]{"+a[t].checkRule+"}$");if(!n.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"digit":n=new RegExp("^(d{0,10}(.?d{0,2}){"+a[t].checkRule+"}$");if(!n.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"between":if(!this.isNumber(e[a[t].name]))return this.error=a[t].errorMsg,!1;var i=a[t].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[a[t].name]>i[1]||e[a[t].name]<i[0])return this.error=a[t].errorMsg,!1;break;case"betweenD":n=/^-?[1-9][0-9]?$/;if(!n.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;i=a[t].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[a[t].name]>i[1]||e[a[t].name]<i[0])return this.error=a[t].errorMsg,!1;break;case"betweenF":n=/^-?[0-9][0-9]?.+[0-9]+$/;if(!n.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;i=a[t].checkRule.split(",");if(i[0]=Number(i[0]),i[1]=Number(i[1]),e[a[t].name]>i[1]||e[a[t].name]<i[0])return this.error=a[t].errorMsg,!1;break;case"same":if(e[a[t].name]!=a[t].checkRule)return this.error=a[t].errorMsg,!1;break;case"notsame":if(e[a[t].name]==a[t].checkRule)return this.error=a[t].errorMsg,!1;break;case"email":n=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/;if(!n.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"phoneno":n=/^[1](([3][0-9])|([4][5-9])|([5][0-3,5-9])|([6][5,6])|([7][0-8])|([8][0-9])|([9][1,8,9]))[0-9]{8}$/;if(!n.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"zipcode":n=/^[0-9]{6}$/;if(!n.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"reg":n=new RegExp(a[t].checkRule);if(!n.test(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"in":if(-1==a[t].checkRule.indexOf(e[a[t].name]))return this.error=a[t].errorMsg,!1;break;case"notnull":if(0==e[a[t].name]||void 0==e[a[t].name]||null==e[a[t].name]||e[a[t].name].length<1)return this.error=a[t].errorMsg,!1;break;case"lengthMin":if(e[a[t].name].length<a[t].checkRule)return this.error=a[t].errorMsg,!1;break;case"lengthMax":if(e[a[t].name].length>a[t].checkRule)return this.error=a[t].errorMsg,!1;break}}return!0},isNumber:function(e){var a=/^-?[1-9][0-9]?.?[0-9]*$/;return a.test(e)}}},"7e7b":function(e,a,t){"use strict";var n=t("0ced"),i=t.n(n);i.a},"9cfd":function(e,a,t){"use strict";t.r(a);var n=t("ec1f"),i=t.n(n);for(var r in n)"default"!==r&&function(e){t.d(a,e,(function(){return n[e]}))}(r);a["default"]=i.a},b79b:function(e,a,t){"use strict";t.r(a);var n=t("14cf"),i=t("9cfd");for(var r in i)"default"!==r&&function(e){t.d(a,e,(function(){return i[e]}))}(r);t("7e7b");var o,s=t("f0c5"),p=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"f7a2735c",null,!1,n["a"],o);a["default"]=p.exports},d0dc:function(e,a,t){var n=t("24fb");a=n(!1),a.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.uni-line-hide[data-v-f7a2735c]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.uni-using-hide[data-v-f7a2735c]{overflow:hidden;width:100%;text-overflow:ellipsis;white-space:nowrap}.prevent-head-roll[data-v-f7a2735c]{position:fixed;left:0;right:0;z-index:998}.authentication-info[data-v-f7a2735c]{overflow:hidden}.info-chunk[data-v-f7a2735c]{padding:0 %?30?%;margin-top:%?20?%;background-color:#fff}.company-info .apply-input-wrap[data-v-f7a2735c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;min-height:%?100?%;border-top:%?2?% solid #eee}.company-info .apply-input-wrap[data-v-f7a2735c]:first-of-type{border:none}.company-info .apply-input-wrap.more-wrap .selected[data-v-f7a2735c]{vertical-align:middle;display:inline-block;-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:right;color:#909399;overflow:hidden;white-space:pre;text-overflow:ellipsis}.company-info .apply-input-wrap.more-wrap .selected.have[data-v-f7a2735c]{color:#303133}.company-info .apply-input-wrap.more-wrap .iconfont[data-v-f7a2735c]{color:#909399;margin-left:%?20?%}.company-info .apply-input-wrap .input-content[data-v-f7a2735c]{text-align:right;font-size:%?28?%;-webkit-box-flex:1;-webkit-flex:1;flex:1;margin-left:%?30?%}.company-info .apply-input-wrap .input-img[data-v-f7a2735c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin:%?40?% 0;width:%?300?%;height:%?140?%;border:%?2?% dashed #ccc}.company-info .apply-input-wrap .input-img .iconfont[data-v-f7a2735c]{font-size:%?68?%;color:#ccc}.company-info .apply-input-wrap .input-img uni-image[data-v-f7a2735c]{width:100%;height:100%}.shroff-account[data-v-f7a2735c]{padding-bottom:%?38?%;padding-top:%?38?%;background:#fff;border-radius:%?10?%}.shroff-account .account-title[data-v-f7a2735c]{display:block;padding:%?20?% 0 %?20?%;font-size:%?28?%;color:#303133;text-align:center;border:1px solid #eee;border-bottom:0}.shroff-account .account-content uni-view[data-v-f7a2735c]{display:-webkit-box;display:-webkit-flex;display:flex;border-top:%?2?% solid #eee;border-right:%?2?% solid #eee}.shroff-account .account-content uni-view[data-v-f7a2735c]:last-of-type{border-bottom:%?2?% solid #eee}.shroff-account .account-content uni-text[data-v-f7a2735c]{padding:%?20?%;border-left:%?2?% solid #eee}.shroff-account .account-content uni-text[data-v-f7a2735c]:first-of-type{width:%?180?%}uni-button[data-v-f7a2735c]{margin-top:%?40?%;margin-bottom:%?40?%}',""]),e.exports=a},ec1f:function(e,a,t){"use strict";var n=t("4ea4");t("c975"),t("e25e"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("96cf");var i=n(t("1da1")),r=n(t("7245")),o={data:function(){return{categoryArr:{key:[],name:[],value:[]},selectCategory:"",applyYearArr:["1年","2年","3年","4年","5年"],selectApplyYear:{key:"",value:""},applyMoney:{paying_apply:"",paying_amount:""},infoData:{shop_name:"",shop_group_name:"",shop_group_id:"",apply_year:""},payData:{paying_money_certificate:"",paying_money_certificate_explain:""},isRenew:!1,isEditRenew:!1,renewId:""}},onShow:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var t;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.$util.checkToken("/pages/renew/apply")){a.next=2;break}return a.abrupt("return");case 2:e.initData(),t=uni.getStorageSync("renewObj")?JSON.parse(uni.getStorageSync("renewObj")):null,t&&0!=t.cert_id&&1==t.is_reopen&&(e.isRenew=!0),t&&0!=t.cert_id&&1!=t.is_reopen&&(e.isEditRenew=!0,e.getReopenDetail());case 6:case"end":return a.stop()}}),a)})))()},methods:{initData:function(){var e=this;this.$api.sendRequest({url:"/shopapi/apply/index",success:function(a){var t=a.data;if(0==a.code&&t&&t.receivable_config){var n=t.receivable_config.value;e.infoData.bank_account_name=n.bank_account_name,e.infoData.bank_account_no=n.bank_account_no,e.infoData.bank_address=n.bank_address,e.infoData.bank_name=n.bank_name}for(var i in t.shop_category){e.categoryArr.key.push(t.shop_category[i].category_id),e.categoryArr.name.push(t.shop_category[i].category_name);var r=t.shop_category[i].category_name+"(保证金"+t.shop_category[i].baozheng_money+")";e.categoryArr.value.push(r)}if(0==a.code&&t.shop_apply_info){var o=t.shop_apply_info;if(e.infoData.shop_name=o.shop_name,e.isRenew){var s=uni.getStorageSync("shopPackage")?JSON.parse(uni.getStorageSync("shopPackage")):null;s&&(e.infoData.shop_group_name=s.group_name,e.infoData.shop_group_id=s.group_id)}var p=e.categoryArr.key.indexOf(o.category_id);e.selectCategory=e.categoryArr.value[p]}e.$refs.loadingCover&&e.$refs.loadingCover.hide()}})},getReopenDetail:function(){var e=this;this.$api.sendRequest({url:"/shopapi/shopreopen/getReopenDetail",success:function(a){if(a){var t=a.data;e.renewId=t.id,e.infoData.shop_name=t.site_name,e.infoData.shop_group_name=t.shop_group_name,e.infoData.shop_group_id=t.shop_group_id,e.infoData.apply_year=t.apply_year,e.selectApplyYear.value=e.applyYearArr[t.apply_year-1],e.selectApplyYear.key=parseInt(t.apply_year)-1,e.payData.paying_money_certificate=t.paying_money_certificate,e.payData.paying_money_certificate_explain=t.paying_money_certificate_explain,e.getApplyMoney()}}})},applyYearChange:function(e){var a=parseInt(e.detail.value);this.selectApplyYear.key=a,this.selectApplyYear.value=this.applyYearArr[a],this.infoData.apply_year=a+1,this.infoData.apply_year&&this.infoData.shop_group_id&&this.getApplyMoney()},getApplyMoney:function(){var e=this;if(!this.infoData.apply_year||!this.infoData.shop_group_id)return!1;this.$api.sendRequest({url:"/shopapi/shopreopen/getReopenMoney",data:{apply_year:this.infoData.apply_year,group_id:this.infoData.shop_group_id},success:function(a){if(0==a.code&&a.data){var t=a.data;e.applyMoney={paying_apply:"",paying_amount:""},e.applyMoney.paying_apply=t.fee+" 元",e.applyMoney.paying_amount=t.money+" 元"}else e.$util.showToast({title:a.message})}})},uplodImg:function(e){var a=this;this.$util.upload({number:1,path:"image"},(function(e){e&&(a.$util.showToast({title:"上传成功"}),a.payData.paying_money_certificate=e[0])}))},vertify:function(){var e=[],a={};this.isEditRenew||(e.push({name:"apply_year",checkType:"required",errorMsg:"请选择入驻年长"}),a.apply_year=this.infoData.apply_year),e.push({name:"paying_money_certificate",checkType:"required",errorMsg:"请上传支付凭证"}),a=Object.assign(a,this.payData);var t=r.default.check(a,e);return!!t||(this.$util.showToast({title:r.default.error}),!1)},save:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var t,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.vertify()&&(t="",n={},e.isEditRenew?(t="/shopapi/shopreopen/editReopen",n=Object.assign(n,e.payData),n.id=e.renewId):(t="/shopapi/shopreopen/addReopen",n=Object.assign(n,e.payData,e.infoData)),e.$api.sendRequest({url:t,data:n,success:function(a){0==a.code?(e.isEditRenew&&uni.removeStorageSync("renewObj"),e.$util.showToast({title:"申请续签成功"}),e.$util.redirectTo("/pages/property/reopen/list",{},"reLaunch")):e.$util.showToast({title:a.message})}}));case 1:case"end":return a.stop()}}),a)})))()}}};a.default=o}}]);