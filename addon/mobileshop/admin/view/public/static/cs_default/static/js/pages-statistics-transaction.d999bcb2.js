(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-statistics-transaction"],{4765:function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n */.uni-line-hide[data-v-a6370164]{overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.uni-using-hide[data-v-a6370164]{overflow:hidden;width:100%;text-overflow:ellipsis;white-space:nowrap}.prevent-head-roll[data-v-a6370164]{position:fixed;left:0;right:0;z-index:998}uni-page-body[data-v-a6370164]{overflow:hidden}.withdrawal[data-v-a6370164]{padding:1px 0}.withdrawal .withdrawal_item[data-v-a6370164]{margin:0 %?30?%}.withdrawal .withdrawal_item .withdrawal_title[data-v-a6370164]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?40?%}.withdrawal .withdrawal_item .withdrawal_title .withdrawal_title_info[data-v-a6370164]{font-size:%?32?%;font-weight:700;-webkit-box-flex:1;-webkit-flex:1;flex:1}.withdrawal .withdrawal_item .withdrawal_title .withdrawal_title_info .total[data-v-a6370164]{color:#ff6a00}.withdrawal .withdrawal_item .withdrawal_title .withdrawal_title_info .line[data-v-a6370164]{display:inline-block;height:%?28?%;width:%?4?%;border-radius:%?4?%}.withdrawal .withdrawal_item .withdrawal_title .select[data-v-a6370164]{border:1px solid #ccc;height:%?46?%;line-height:%?46?%;border-radius:%?46?%;min-width:%?160?%;text-align:center;font-size:%?24?%}.withdrawal .withdrawal_item .withdrawal_title .select uni-text[data-v-a6370164]{vertical-align:middle}.withdrawal .withdrawal_item .withdrawal_content[data-v-a6370164]{background-color:#fff;border-radius:%?10?%}.withdrawal .withdrawal_item .withdrawal_content.margin-top[data-v-a6370164]{margin-top:%?30?%!important}.withdrawal .withdrawal_item .withdrawal_content .flex_two[data-v-a6370164]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.withdrawal .withdrawal_item .withdrawal_content .flex_two .flex_two-item[data-v-a6370164]{padding:%?28?% %?30?%;width:calc(50% - %?60?% - 1px);border-bottom:1px solid #eee}.withdrawal .withdrawal_item .withdrawal_content .flex_two .flex_two-item[data-v-a6370164]:nth-child(2n + 1){border-right:1px solid #eee}.withdrawal .withdrawal_item .withdrawal_content .flex_two .flex_two-item.border_none[data-v-a6370164]{border-bottom:0}.withdrawal .withdrawal_item .withdrawal_content .flex_two .flex_two-item .num[data-v-a6370164]{font-size:%?30?%;font-weight:500}.withdrawal .withdrawal_item .withdrawal_content .flex_two .flex_two-item .tip[data-v-a6370164]{color:#909399;font-size:%?24?%}.withdrawal .withdrawal_item .withdrawal_content .flex_two .flex_three-item[data-v-a6370164]{padding:%?28?% %?30?%;-webkit-box-flex:1;-webkit-flex:1;flex:1}.withdrawal .withdrawal_item .withdrawal_content .flex_two .flex_three-item[data-v-a6370164]:nth-child(2n + 1){border-right:1px solid #eee}.withdrawal .withdrawal_item .withdrawal_content .flex_two .flex_three-item .num[data-v-a6370164]{font-size:%?30?%;font-weight:500}.withdrawal .withdrawal_item .withdrawal_content .flex_two .flex_three-item .tip[data-v-a6370164]{color:#909399;font-size:%?24?%}.withdrawal .withdrawal_item .withdrawal_content .flex_two .overhidden[data-v-a6370164]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.withdrawal .withdrawal_item .withdrawal_content .charts[data-v-a6370164]{padding:%?30?%}.safe-area[data-v-a6370164]{padding-bottom:calc(constant(safe-area-inset-bottom) + %?40?%);padding-bottom:calc(env(safe-area-inset-bottom) + %?40?%)}',""]),t.exports=a},"69b6":function(t,a,e){var i=e("4765");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=e("4f06").default;r("6d75f125",i,!0,{sourceMap:!1,shadowMode:!1})},"6e0a":function(t,a,e){"use strict";var i=e("69b6"),r=e.n(i);r.a},a3a5:function(t,a,e){"use strict";var i=e("4ea4");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("4064")),o=i(e("b0c6")),n={components:{uCharts:r.default},mixins:[o.default]};a.default=n},a851:function(t,a,e){"use strict";e.r(a);var i=e("a3a5"),r=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(a,t,(function(){return i[t]}))}(o);a["default"]=r.a},b0c6:function(t,a,e){"use strict";var i=e("4ea4");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=i(e("ade3")),o={data:function(){return{cWidth:0,cHeight:0,canvas:!0,arr:[],tableArea:{categories:[],series:[]},order_total:{categories:[],series:[]},order_pay_count:{categories:[],series:[]},goods_pay_count:{categories:[],series:[]},refCurr:"",transaction_time:7,picker:{gaikuang:[{date_type:0,date_text:"今日实时"},{date_type:1,date_text:"近7天"},{date_type:2,date_text:"近30天"}],table:[{date_type:1,date_text:"近7天",day:7},{date_type:2,date_text:"近30天",day:30}]},pickerCurr:{gaikuang:0,table:0,order_total:0,order_pay_count:0,goods_pay_count:0},total_money:{gaikuang:0,table:0,order_total:0,order_pay_count:0,goods_pay_count:0},order_info:{},shop_info:{}}},onShow:function(){this.$util.checkToken("/pages/statistics/transaction")&&(this.getChartsInfo(),this.getTotalData(),this.getTotalData(1))},methods:{selectCharts:function(t){this.refCurr=t},bindPickerChange:function(t,a){this.pickerCurr[t]=a.target.value,this.transaction_time=this.picker.table[a.target.value].day,this.getChartsInfo(),this.getTotalData(this.picker.table[a.target.value].date_type)},pickerChangeShop:function(t){this.pickerCurr.gaikuang=t.target.value,this.getTotalData()},init:function(){this.cWidth=uni.upx2px(630),this.cHeight=uni.upx2px(400),this.getServerData()},getTotalData:function(t){var a=this,e=t||this.picker.gaikuang[this.pickerCurr.gaikuang].date_type;this.$api.sendRequest({url:"/shopapi/statistics/order",data:{date_type:e},success:function(e){e.code>=0?t?a.refCurr?a.total_money[a.refCurr]=e.data[a.refCurr]:(a.total_money.order_total=e.data.order_total,a.total_money.order_pay_count=e.data.order_pay_count,a.total_money.goods_pay_count=e.data.goods_pay_count):a.shop_info=e.data:a.$util.showToast({title:e.message}),a.$refs.loadingCover&&a.$refs.loadingCover.hide()}})},getChartsInfo:function(){var t=this,a=this.refCurr?this.picker.table[this.pickerCurr[this.refCurr]].date_type:this.picker.table[this.pickerCurr["order_pay_count"]].date_type;this.$api.sendRequest({url:"/shopapi/statistics/getOrderStatList",data:{date_type:a},success:function(a){if(a.code>=0){t.order_info=a.data;for(var e=[],i=t.transaction_time-1;i>=0;i--)e.push(t.getDay(-i));t.order_total.categories=t.order_pay_count.categories=t.goods_pay_count.categories=e,t.order_total.series=[{name:"订单金额",data:a.data.order_total,color:"#FF6A00",time:a.data.time}],t.order_pay_count.series=[{name:"订单数",data:a.data.order_pay_count,color:"#FF6A00",time:a.data.time}],t.goods_pay_count.series=[{name:"订单商品数",data:a.data.goods_pay_count,color:"#FF6A00",time:a.data.time}],t.$refs[t.refCurr]&&t.refCurr?t.$refs[t.refCurr][0].changeData(t.refCurr,t[t.refCurr]):t.init()}else t.$util.showToast({title:a.message})}})},getDay:function(t){var a=new Date;a.setDate(a.getDate()+t);a.getFullYear();var e=a.getMonth()+1;e<10&&(e="0"+e);var i=a.getDate();return i<10&&(i="0"+i),e+"-"+i},getServerData:function(){var t,a=(t={enableScroll:!1,yAxisdisabled:!0,xAxisgridColor:"transparent",yAxisgridType:"dash",yAxisgridColor:"#eeeeee",animation:!0},(0,r.default)(t,"enableScroll",!0),(0,r.default)(t,"scrollColor","transparent"),(0,r.default)(t,"scrollPosition","right"),(0,r.default)(t,"scrollBackgroundColor","transparent"),(0,r.default)(t,"extra",{area:{addLine:!0,opacity:.5,width:2,color:"#FF6A00",type:"curve"}}),(0,r.default)(t,"legend",!1),t);this.order_total=Object.assign(this.order_total,a,{unit:"元"}),this.order_pay_count=Object.assign(this.order_pay_count,a,{unit:"笔"}),this.goods_pay_count=Object.assign(this.goods_pay_count,a,{unit:"件"});var e=[{title:"订单金额",opts:this.order_total,chartType:"area",extraType:"curve",id:"order_total"},{title:"订单数",opts:this.order_pay_count,chartType:"area",extraType:"curve",id:"order_pay_count"},{title:"订单商品数",opts:this.goods_pay_count,chartType:"area",extraType:"curve",id:"goods_pay_count"}];this.arr=e}}};a.default=o},f705:function(t,a,e){"use strict";e.d(a,"b",(function(){return r})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return i}));var i={loadingCover:e("8f54").default},r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"withdrawal safe-area"},[e("v-uni-view",{staticClass:"withdrawal_item"},[e("v-uni-view",{staticClass:"withdrawal_title"},[e("v-uni-view",{staticClass:"withdrawal_title_info"},[e("v-uni-text",{staticClass:"line color-base-bg margin-right"}),e("v-uni-text",[t._v("交易概况")])],1),e("v-uni-picker",{attrs:{value:t.pickerCurr.gaikuang,range:t.picker.gaikuang,"range-key":"date_text"},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.pickerChangeShop.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"select color-tip"},[t._v(t._s(t.picker.gaikuang[t.pickerCurr.gaikuang].date_text)),e("v-uni-text",{staticClass:"iconfont iconiconangledown"})],1)],1)],1),e("v-uni-view",{staticClass:"withdrawal_content margin-top"},[e("v-uni-view",{staticClass:"flex_two"},[e("v-uni-view",{staticClass:"flex_three-item overhidden"},[e("v-uni-view",{staticClass:"tip overhidden"},[t._v("订单金额(元)")]),e("v-uni-view",{staticClass:"num overhidden"},[t._v(t._s(t.shop_info.order_total))])],1),e("v-uni-view",{staticClass:"flex_three-item overhidden"},[e("v-uni-view",{staticClass:"tip overhidden"},[t._v("订单数(笔)")]),e("v-uni-view",{staticClass:"num overhidden"},[t._v(t._s(t.shop_info.order_pay_count))])],1),e("v-uni-view",{staticClass:"flex_three-item overhidden"},[e("v-uni-view",{staticClass:"tip overhidden"},[t._v("订单商品数(件)")]),e("v-uni-view",{staticClass:"num overhidden"},[t._v(t._s(t.shop_info.goods_pay_count))])],1)],1)],1)],1),t._l(t.arr,(function(a,i){return[e("v-uni-view",{key:i+"_0",staticClass:"withdrawal_item margin-top"},[e("v-uni-view",{staticClass:"withdrawal_title"},[e("v-uni-view",{staticClass:"withdrawal_title_info"},[e("v-uni-text",{staticClass:"line color-base-bg margin-right"}),t._v(t._s(a.title)),a.opts.unit?e("v-uni-text",[t._v("("+t._s(a.opts.unit)+")")]):t._e(),e("v-uni-text",{staticClass:"margin-left total"},[t._v(t._s(t.total_money[a.id]))])],1),e("v-uni-picker",{attrs:{value:t.pickerCurr.table,range:t.picker.table,"range-key":"date_text"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindPickerChange(a.id,e)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.selectCharts(a.id)}}},[e("v-uni-view",{staticClass:"select color-tip color-base-text"},[t._v(t._s(t.picker.table[t.pickerCurr[a.id]].date_text)),e("v-uni-text",{staticClass:"iconfont iconiconangledown"})],1)],1)],1),e("v-uni-view",{staticClass:"withdrawal_content margin-top"},[e("v-uni-view",{staticClass:"charts"},[e("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.refCurr=a.id}}},[e("uCharts",{ref:a.id,refInFor:!0,attrs:{scroll:a.opts.enableScroll,show:t.canvas,canvasId:a.id,chartType:a.chartType,extraType:a.extraType,cWidth:t.cWidth,cHeight:t.cHeight,opts:a.opts}})],1)],1)],1)],1)]})),e("loading-cover",{ref:"loadingCover"})],2)},o=[]},f7e0:function(t,a,e){"use strict";e.r(a);var i=e("f705"),r=e("a851");for(var o in r)"default"!==o&&function(t){e.d(a,t,(function(){return r[t]}))}(o);e("6e0a");var n,l=e("f0c5"),d=Object(l["a"])(r["default"],i["b"],i["c"],!1,null,"a6370164",null,!1,i["a"],n);a["default"]=d.exports}}]);