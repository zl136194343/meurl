(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13eaa20c"],{"0603":function(e,t,a){"use strict";var r=a("508f"),i=a.n(r);i.a},3698:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.yes,expression:"yes"}],staticClass:"null-page"}),a("el-card",{staticClass:"box-card order-list"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("我的订单")])]),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.orderStatus,callback:function(t){e.orderStatus=t},expression:"orderStatus"}},[a("el-tab-pane",{attrs:{label:"全部订单",name:"all"}}),a("el-tab-pane",{attrs:{label:"待付款",name:"waitpay"}}),a("el-tab-pane",{attrs:{label:"待发货",name:"waitsend"}}),a("el-tab-pane",{attrs:{label:"待收货",name:"waitconfirm"}}),a("el-tab-pane",{attrs:{label:"待评价",name:"waitrate"}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("nav",[a("li",[e._v("商品信息")]),a("li",[e._v("单价")]),a("li",[e._v("数量")]),a("li",[e._v("实付款")]),a("li",[e._v("订单状态")]),a("li",[e._v("操作")])]),e.orderList.length>0?a("div",{staticClass:"list"},e._l(e.orderList,(function(t,r){return a("div",{key:r,staticClass:"item"},[a("div",{staticClass:"head"},[a("span",{staticClass:"create-time"},[e._v(e._s(e.$util.timeStampTurnTime(t.create_time)))]),a("span",{staticClass:"order-no"},[e._v("订单号："+e._s(t.order_no))]),a("router-link",{attrs:{to:"/shop-"+t.site_id,target:"_blank"}},[e._v(e._s(t.site_name))]),a("span",{staticClass:"order-type"},[e._v(e._s(t.order_type_name))])],1),e._l(t.order_goods,(function(i,n){return a("ul",{key:n},[a("li",[a("div",{staticClass:"img-wrap",on:{click:function(t){return e.$router.pushToTab("/sku-"+i.sku_id)}}},[a("img",{attrs:{src:e.$img(i.sku_image,{size:"mid"})},on:{error:function(t){return e.imageError(r,n)}}})]),a("div",{staticClass:"info-wrap",on:{click:function(t){return e.$router.pushToTab("/sku-"+i.sku_id)}}},[a("h5",[e._v(e._s(i.sku_name))])])]),a("li",[a("span",[e._v("￥"+e._s(i.price))])]),a("li",[a("span",[e._v(e._s(i.num))])]),a("li",[a("span",[e._v("￥"+e._s(t.pay_money))])]),0==n?[a("li",[a("span",{staticClass:"ns-text-color"},[e._v(e._s(t.order_status_name))]),a("el-link",{attrs:{underline:!1},on:{click:function(a){return e.orderDetail(t)}}},[e._v("订单详情")])],1),a("li",[t.action.length>0?[1==t.is_evaluate?a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return e.operation("memberOrderEvaluation",t)}}},[0==t.evaluate_status?[e._v(" 评价 ")]:1==t.evaluate_status?[e._v(" 追评 ")]:e._e()],2):e._e(),e._l(t.action,(function(r,i){return a("el-button",{key:i,attrs:{type:"primary",size:"mini",plain:"orderPay"!=r.action},on:{click:function(a){return e.operation(r.action,t)}}},[e._v(" "+e._s(r.title)+" ")])}))]:0==t.action.length&&1==t.is_evaluate?[1==t.is_evaluate?a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(a){return e.operation("memberOrderEvaluation",t)}}},[0==t.evaluate_status?[e._v(" 评价 ")]:1==t.evaluate_status?[e._v(" 追评 ")]:e._e()],2):e._e()]:e._e()],2)]:e._e()],2)}))],2)})),0):e.loading||0!=e.orderList.length?e._e():a("div",{staticClass:"empty-wrap"},[e._v("暂无相关订单")])]),a("div",{staticClass:"pager"},[a("el-pagination",{attrs:{background:"","pager-count":5,total:e.total,"prev-text":"上一页","next-text":"下一页","current-page":e.currentPage,"page-size":e.pageSize,"hide-on-single-page":""},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handlePageSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)],1)},i=[],n=(a("b0c0"),a("5530")),s=a("2f62"),o=a("dea0"),u=a("6554"),c={name:"order_list",components:{},data:function(){return{orderStatus:"all",loading:!0,orderList:[],currentPage:1,pageSize:10,total:0,yes:!0}},mixins:[u["a"]],created:function(){this.orderStatus=this.$route.query.status||"all",this.getOrderList()},computed:Object(n["a"])({},Object(s["b"])(["defaultGoodsImage"])),mounted:function(){var e=this;setTimeout((function(){e.yes=!1}),300)},methods:{handleClick:function(e,t){this.currentPage=1,this.orderStatus=e.name,this.refresh()},getOrderList:function(){var e=this;Object(o["c"])({page:this.currentPage,page_size:this.pageSize,order_status:this.orderStatus}).then((function(t){var a=[];0==t.code&&t.data&&(a=t.data.list,e.total=t.data.count),e.orderList=a,e.loading=!1})).catch((function(t){e.loading=!1}))},handlePageSizeChange:function(e){this.pageSize=e,this.refresh()},handleCurrentPageChange:function(e){this.currentPage=e,this.refresh()},refresh:function(){this.loading=!0,this.getOrderList()},operation:function(e,t){var a=this;this.status;switch(e){case"orderPay":this.orderPay(t);break;case"orderClose":this.orderClose(t.order_id,(function(){a.refresh()}));break;case"memberTakeDelivery":this.orderDelivery(t.order_id,(function(){a.refresh()}));break;case"trace":this.$router.push({path:"/member/logistics",query:{order_id:t.order_id}});break;case"memberOrderEvaluation":this.$router.pushToTab({path:"/evaluate",query:{order_id:t.order_id}});break}},orderDetail:function(e){switch(parseInt(e.order_type)){case 2:this.$router.push({path:"/member/order_detail_pickup",query:{order_id:e.order_id}});break;case 3:this.$router.push({path:"/member/order_detail_local_delivery",query:{order_id:e.order_id}});break;case 4:this.$router.push({path:"/member/order_detail_virtual",query:{order_id:e.order_id}});break;default:this.$router.push({path:"/member/order_detail",query:{order_id:e.order_id}});break}},imageError:function(e,t){this.orderList[e].order_goods[t].sku_image=this.defaultGoodsImage}}},d=c,l=(a("0603"),a("2877")),p=Object(l["a"])(d,r,i,!1,null,"572b0b0c",null);t["default"]=p.exports},"508f":function(e,t,a){},6554:function(e,t,a){"use strict";var r=a("dea0");t["a"]={methods:{orderPay:function(e){var t=this;0==e.adjust_money?Object(r["e"])({order_ids:e.order_id}).then((function(e){e.code>=0?t.$router.push({path:"/pay",query:{code:e.data}}):t.$message({message:e.message,type:"warning"})})):this.$confirm("商家已将支付金额调整为"+e.pay_money+"元，是否继续支付？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["e"])({order_ids:e.order_id}).then((function(e){e.code>=0?t.$router.push({path:"/pay",query:{code:e.data}}):t.$message({message:e.message,type:"warning"})}))}))},orderClose:function(e,t){var a=this;this.$confirm("您确定要关闭该订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])({order_id:e}).then((function(e){a.$message({message:"订单关闭成功",type:"success"}),"function"==typeof t&&t()}))}))},orderDelivery:function(e,t){var a=this;this.$confirm("您确定已经收到货物了吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["f"])({order_id:e}).then((function(e){a.$message({message:"订单收货成功",type:"success"}),"function"==typeof t&&t()}))}))}}}}}]);
//# sourceMappingURL=chunk-13eaa20c.836918fa.js.map