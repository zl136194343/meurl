{"version":3,"sources":["webpack:///./src/api/pay.js","webpack:///./src/views/pay/index.vue?9043","webpack:///src/views/pay/index.vue","webpack:///./src/views/pay/index.vue?0122","webpack:///./src/views/pay/index.vue","webpack:///./src/views/pay/index.vue?3d2d","webpack:///./src/views/pay/index.vue?4875"],"names":["getPayInfo","params","http","url","data","forceLogin","getPayType","checkPayStatus","pay","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","attrs","_v","_s","payInfo","pay_money","on","$event","orderOpen","class","out_trade_no","pay_detail","$timeStampTurnTime","create_time","_e","payTypeList","_l","item","index","key","payIndex","dialogVisible","slot","goIndex","goOrderList","openQrcode","payQrcode","staticRenderFns","component"],"mappings":"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kB,G,sDC6GtB,GACA,WACA,cACA,gBACA,OACA,aACA,cACA,SACA,aAEA,WACA,cACA,aACA,0BACA,eAEA,CACA,YACA,uBACA,mBAGA,UACA,WACA,aACA,cACA,WACA,UACA,mBAGA,QA/BA,WAgCA,wBAMA,uCACA,kBACA,kBACA,uBARA,mBACA,YASA,SACA,WADA,WACA,WACA,gBACA,6BACA,gBAEA,kBAKA,EAHA,KAGA,EAFA,QAHA,IAIA,EACA,EADA,KAEA,IACA,kBAEA,gBAEA,mBACA,aACA,kBACA,kBACA,aACA,mBACA,gBACA,mCAMA,WA9BA,WA8BA,WACA,mBACA,sBAEA,EAGA,EAHA,KAGA,EAFA,QAEA,EADA,KAEA,OACA,oBACA,iBAEA,sCACA,oCACA,iCAMA,mBACA,gCAGA,eAtDA,WAsDA,WACA,mCACA,gBACA,4BAEA,sBAEA,EAGA,EAHA,KAEA,GACA,EAFA,QAEA,EADA,MAEA,OACA,KACA,kBACA,uBACA,mBACA,gBACA,+CAIA,2BAIA,mBACA,uBACA,gBACA,gBAGA,MAEA,IAvFA,WAuFA,WACA,kCACA,MAEA,wCACA,gBACA,uCACA,gBACA,gBAEA,sBAEA,EAGA,EAHA,KACA,EAEA,EAFA,QAEA,EADA,KAEA,QACA,eACA,aACA,qBACA,yBACA,SACA,MACA,gBACA,0BACA,gBACA,WAGA,YACA,UACA,oBAIA,mBACA,iCAGA,KA9HA,WA+HA,uBAEA,QAjIA,WAkIA,0BACA,sBACA,mBACA,YAGA,YAxIA,WAyIA,0BACA,sBACA,mBACA,+BCrS8V,I,kCCS1VC,EAAY,eACd,EACAxC,EACAuC,GACA,EACA,KACA,WACA,MAIa,aAAAC,E,6CCpBf,yBAA2mB,EAAG,G,2DCA9mB,yBAAmoB,EAAG,G","file":"assets/js/chunk-aba7e086.60affc29.js","sourcesContent":["import http from \"../utils/http\"\r\n\r\n/**\r\n * 支付详情\r\n * @param {object} params\r\n */\r\nexport function getPayInfo(params) {\r\n    return http({\r\n        url: \"/api/pay/info\",\r\n        data: params,\r\n        forceLogin: true\r\n    })\r\n}\r\n\r\n/**\r\n * 支付方式\r\n * @param {object} params\r\n */\r\nexport function getPayType(params) {\r\n    return http({\r\n        url: \"/api/pay/type\",\r\n        data: params,\r\n        forceLogin: true\r\n    })\r\n}\r\n\r\n/**\r\n * 支付状态\r\n * @param {object} params\r\n */\r\nexport function checkPayStatus(params) {\r\n    return http({\r\n        url: \"/api/pay/status\",\r\n        data: params,\r\n        forceLogin: true\r\n    })\r\n}\r\n\r\n/**\r\n * 支付状态\r\n * @param {object} params\r\n */\r\nexport function pay(params) {\r\n    return http({\r\n        url: \"/api/pay/pay\",\r\n        data: params,\r\n        forceLogin: true\r\n    })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}]},[_c('div',{staticClass:\"item-block\"},[_c('div',{staticClass:\"payment-detail\"},[_c('div',{staticClass:\"payment-media\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":4}},[_c('div',{staticClass:\"media-left\"},[_c('i',{staticClass:\"el-icon-circle-check ns-text-color\"})])]),_c('el-col',{attrs:{\"span\":16}},[_c('div',{staticClass:\"media-body\"},[_c('el-row',[_c('el-col',{attrs:{\"span\":12}},[_c('div',{staticClass:\"payment-text\"},[_vm._v(\"您的订单已提交成功，正在等待处理！\")]),_c('div',[_c('span',[_vm._v(\"应付金额：\")]),_c('span',{staticClass:\"payment-money ns-text-color\"},[_vm._v(\"￥\"+_vm._s(_vm.payInfo.pay_money)+\"元\")])])]),_c('el-col',{attrs:{\"span\":12}})],1)],1)]),_c('el-col',{attrs:{\"span\":4}},[_c('div',{staticClass:\"media-right\"},[_c('div',{staticClass:\"el-button--text\",on:{\"click\":function($event){_vm.orderOpen ? (_vm.orderOpen = false) : (_vm.orderOpen = true)}}},[_vm._v(\" 订单信息 \"),_c('i',{staticClass:\"el-icon-arrow-down\",class:_vm.orderOpen ? 'rotate' : ''})])])])],1)],1),(_vm.orderOpen)?_c('div',{staticClass:\"order-info\"},[_c('el-row',[_c('el-col',{staticClass:\"order-info-left\",attrs:{\"span\":4}}),_c('el-col',{attrs:{\"span\":20}},[_c('div',{staticClass:\"line\"}),_c('div',{staticClass:\"order-item\"},[_c('div',{staticClass:\"item-label\"},[_vm._v(\"交易单号：\")]),_c('div',{staticClass:\"item-value\"},[_vm._v(_vm._s(_vm.payInfo.out_trade_no))])]),_c('div',{staticClass:\"order-item\"},[_c('div',{staticClass:\"item-label\"},[_vm._v(\"订单内容：\")]),_c('div',{staticClass:\"item-value\"},[_vm._v(_vm._s(_vm.payInfo.pay_detail))])]),_c('div',{staticClass:\"order-item\"},[_c('div',{staticClass:\"item-label\"},[_vm._v(\"订单金额：\")]),_c('div',{staticClass:\"item-value\"},[_vm._v(\"￥\"+_vm._s(_vm.payInfo.pay_money))])]),_c('div',{staticClass:\"order-item\"},[_c('div',{staticClass:\"item-label\"},[_vm._v(\"创建时间：\")]),_c('div',{staticClass:\"item-value\"},[_vm._v(_vm._s(_vm.$timeStampTurnTime(_vm.payInfo.create_time)))])])])],1)],1):_vm._e()])]),_c('div',{staticClass:\"item-block\"},[_c('div',{staticClass:\"block-text\"},[_vm._v(\"支付方式\")]),(_vm.payTypeList.length)?_c('div',{staticClass:\"pay-type-list\"},[_vm._l((_vm.payTypeList),function(item,index){return _c('div',{key:index,staticClass:\"pay-type-item\",class:_vm.payIndex == index ? 'active' : '',on:{\"click\":function($event){_vm.payIndex = index}}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),_c('div',{staticClass:\"clear\"})],2):_c('div',{staticClass:\"no-pay-type\"},[_c('p',[_vm._v(\"商家未配置支付方式\")])])]),(_vm.payTypeList.length)?_c('div',{staticClass:\"item-block\"},[_c('div',{staticClass:\"order-submit\"},[_c('el-button',{staticClass:\"el-button--primary\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.pay}},[_vm._v(\"立即支付\")])],1),_c('div',{staticClass:\"clear\"})]):_vm._e(),_c('el-dialog',{staticClass:\"confirm-pay-wrap\",attrs:{\"title\":\"请确认支付是否完成\",\"visible\":_vm.dialogVisible,\"width\":\"23%\",\"top\":\"30vh\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{staticClass:\"info-wrap\"},[_c('i',{staticClass:\"el-message-box__status el-icon-warning\"}),_c('span',[_vm._v(\"完成支付前请根据您的情况点击下面的按钮\")])]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.goIndex}},[_vm._v(\"返回首页\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.goOrderList}},[_vm._v(\"已完成支付\")])],1)]),_c('el-dialog',{attrs:{\"title\":\"请用微信扫码支付\",\"visible\":_vm.openQrcode,\"width\":\"300px\",\"center\":\"\"},on:{\"update:visible\":function($event){_vm.openQrcode=$event}}},[_c('div',{staticClass:\"wechatpay-box\"},[_c('img',{attrs:{\"src\":_vm.payQrcode}})])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div v-loading=\"loading\">\r\n\t\t<div class=\"item-block\">\r\n\t\t\t<div class=\"payment-detail\">\r\n\t\t\t\t<div class=\"payment-media\">\r\n\t\t\t\t\t<el-row>\r\n\t\t\t\t\t\t<el-col :span=\"4\">\r\n\t\t\t\t\t\t\t<div class=\"media-left\"><i class=\"el-icon-circle-check ns-text-color\"></i></div>\r\n\t\t\t\t\t\t</el-col>\r\n\r\n\t\t\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t\t\t<div class=\"media-body\">\r\n\t\t\t\t\t\t\t\t<el-row>\r\n\t\t\t\t\t\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"payment-text\">您的订单已提交成功，正在等待处理！</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<span>应付金额：</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"payment-money ns-text-color\">￥{{ payInfo.pay_money }}元</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t\t\t<el-col :span=\"12\"></el-col>\r\n\t\t\t\t\t\t\t\t</el-row>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-col>\r\n\r\n\t\t\t\t\t\t<el-col :span=\"4\">\r\n\t\t\t\t\t\t\t<div class=\"media-right\">\r\n\t\t\t\t\t\t\t\t<div class=\"el-button--text\" @click=\"orderOpen ? (orderOpen = false) : (orderOpen = true)\">\r\n\t\t\t\t\t\t\t\t\t订单信息\r\n\t\t\t\t\t\t\t\t\t<i :class=\"orderOpen ? 'rotate' : ''\" class=\"el-icon-arrow-down\"></i>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-row>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"order-info\" v-if=\"orderOpen\">\r\n\t\t\t\t\t<el-row>\r\n\t\t\t\t\t\t<el-col :span=\"4\" class=\"order-info-left\"></el-col>\r\n\t\t\t\t\t\t<el-col :span=\"20\">\r\n\t\t\t\t\t\t\t<div class=\"line\"></div>\r\n\t\t\t\t\t\t\t<div class=\"order-item\">\r\n\t\t\t\t\t\t\t\t<div class=\"item-label\">交易单号：</div>\r\n\t\t\t\t\t\t\t\t<div class=\"item-value\">{{ payInfo.out_trade_no }}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"order-item\">\r\n\t\t\t\t\t\t\t\t<div class=\"item-label\">订单内容：</div>\r\n\t\t\t\t\t\t\t\t<div class=\"item-value\">{{ payInfo.pay_detail }}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"order-item\">\r\n\t\t\t\t\t\t\t\t<div class=\"item-label\">订单金额：</div>\r\n\t\t\t\t\t\t\t\t<div class=\"item-value\">￥{{ payInfo.pay_money }}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"order-item\">\r\n\t\t\t\t\t\t\t\t<div class=\"item-label\">创建时间：</div>\r\n\t\t\t\t\t\t\t\t<div class=\"item-value\">{{ $timeStampTurnTime(payInfo.create_time) }}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-row>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"item-block\">\r\n\t\t\t<div class=\"block-text\">支付方式</div>\r\n\t\t\t<div class=\"pay-type-list\" v-if=\"payTypeList.length\">\r\n\t\t\t\t<div class=\"pay-type-item\" v-for=\"(item, index) in payTypeList\" :key=\"index\" :class=\"payIndex == index ? 'active' : ''\"\r\n\t\t\t\t @click=\"payIndex = index\">\r\n\t\t\t\t\t{{ item.name }}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"clear\"></div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"no-pay-type\" v-else>\r\n\t\t\t\t<p>商家未配置支付方式</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"item-block\" v-if=\"payTypeList.length\">\r\n\t\t\t<div class=\"order-submit\">\r\n\t\t\t\t<el-button type=\"primary\" class=\"el-button--primary\" @click=\"pay\">立即支付</el-button>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"clear\"></div>\r\n\t\t</div>\r\n\r\n\t\t<el-dialog title=\"请确认支付是否完成\" :visible.sync=\"dialogVisible\" width=\"23%\" top=\"30vh\" class=\"confirm-pay-wrap\">\r\n\t\t\t<div class=\"info-wrap\">\r\n\t\t\t\t<i class=\"el-message-box__status el-icon-warning\"></i>\r\n\t\t\t\t<span>完成支付前请根据您的情况点击下面的按钮</span>\r\n\t\t\t</div>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"goIndex\" size=\"small\">返回首页</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"goOrderList\" size=\"small\">已完成支付</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\r\n\t\t<!-- 微信支付弹框 -->\r\n\t\t<el-dialog title=\"请用微信扫码支付\" :visible.sync=\"openQrcode\" width=\"300px\" center>\r\n\t\t\t<div class=\"wechatpay-box\"><img :src=\"payQrcode\" /></div>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetPayInfo,\r\n\t\tgetPayType,\r\n\t\tcheckPayStatus,\r\n\t\tpay\r\n\t} from '@/api/pay';\r\n\r\n\texport default {\r\n\t\tname: 'pay',\r\n\t\tcomponents: {},\r\n\t\tdata: () => {\r\n\t\t\treturn {\r\n\t\t\t\torderOpen: false,\r\n\t\t\t\toutTradeNo: '',\r\n\t\t\t\tpayInfo: {\r\n\t\t\t\t\tpay_money: 0\r\n\t\t\t\t},\r\n\t\t\t\tpayIndex: 0,\r\n\t\t\t\tpayTypeList: [{\r\n\t\t\t\t\t\tname: '支付宝支付',\r\n\t\t\t\t\t\ticon: 'iconzhifubaozhifu-',\r\n\t\t\t\t\t\ttype: 'alipay'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: '微信支付',\r\n\t\t\t\t\t\ticon: 'iconweixinzhifu',\r\n\t\t\t\t\t\ttype: 'wechatpay'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tpayUrl: '',\r\n\t\t\t\ttimer: null,\r\n\t\t\t\tpayQrcode: '',\r\n\t\t\t\topenQrcode: false,\r\n\t\t\t\tloading: true,\r\n\t\t\t\ttest: null,\r\n\t\t\t\tdialogVisible: false\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif (!this.$route.query.code) {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.outTradeNo = this.$route.query.code;\r\n\t\t\tthis.getPayInfo();\r\n\t\t\tthis.getPayType();\r\n\t\t\tthis.checkPayStatus();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetPayInfo() {\r\n\t\t\t\tgetPayInfo({\r\n\t\t\t\t\t\tout_trade_no: this.outTradeNo,\r\n\t\t\t\t\t\tforceLogin: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t} = res;\r\n\t\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\t\tthis.payInfo = res.data;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\tthis.$message.error({\r\n\t\t\t\t\t\t\tmessage: err.message,\r\n\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\t\t\tpath: '/member/order_list'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetPayType() {\r\n\t\t\t\tgetPayType({})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t} = res;\r\n\t\t\t\t\t\tif (code >= 0) {\r\n\t\t\t\t\t\t\tif (res.data.pay_type == '') {\r\n\t\t\t\t\t\t\t\tthis.payTypeList = [];\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.payTypeList.forEach((val, key) => {\r\n\t\t\t\t\t\t\t\t\tif (res.data.pay_type.indexOf(val.type) == -1) {\r\n\t\t\t\t\t\t\t\t\t\tthis.payTypeList.splice(key, 1);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.$message.error(err.message);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tcheckPayStatus() {\r\n\t\t\t\tthis.timer = setInterval(() => {\r\n\t\t\t\t\tcheckPayStatus({\r\n\t\t\t\t\t\t\tout_trade_no: this.outTradeNo\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t\t} = res;\r\n\t\t\t\t\t\t\tif (code >= 0) {\r\n\t\t\t\t\t\t\t\tif (code == 0) {\r\n\t\t\t\t\t\t\t\t\tif (data.pay_status == 2) {\r\n\t\t\t\t\t\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t\t\t\t\t\t\tthis.dialogVisible = false;\r\n\t\t\t\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\t\t\t\t\tpath: '/result?code=' + this.payInfo.out_trade_no\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\t\tpath: '/'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}, 1000);\r\n\t\t\t},\r\n\t\t\tpay() {\r\n\t\t\t\tvar payType = this.payTypeList[this.payIndex];\r\n\t\t\t\tif (!payType) return;\r\n\r\n\t\t\t\tif (payType.type == 'alipay') var newWindow = window.open();\r\n\t\t\t\tpay({\r\n\t\t\t\t\t\tout_trade_no: this.payInfo.out_trade_no,\r\n\t\t\t\t\t\tpay_type: payType.type,\r\n\t\t\t\t\t\tapp_type: 'pc'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tcode,\r\n\t\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t} = res;\r\n\t\t\t\t\t\tif (code >= 0) {\r\n\t\t\t\t\t\t\tswitch (payType.type) {\r\n\t\t\t\t\t\t\t\tcase 'alipay':\r\n\t\t\t\t\t\t\t\t\tthis.payUrl = res.data.data;\r\n\t\t\t\t\t\t\t\t\tnewWindow.location.href = this.payUrl;\r\n\t\t\t\t\t\t\t\t\tthis.open();\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'wechatpay':\r\n\t\t\t\t\t\t\t\t\tthis.payQrcode = res.data.qrcode;\r\n\t\t\t\t\t\t\t\t\tthis.openQrcode = true;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\tmessage: message,\r\n\t\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.$message.error(err.message);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\topen() {\r\n\t\t\t\tthis.dialogVisible = true;\r\n\t\t\t},\r\n\t\t\tgoIndex() {\r\n\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\tthis.dialogVisible = false;\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgoOrderList() {\r\n\t\t\t\tclearInterval(this.timer);\r\n\t\t\t\tthis.dialogVisible = false;\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/member/order_list'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.clear {\r\n\t\tclear: both;\r\n\t}\r\n\r\n\t.item-block {\r\n\t\tpadding: 0 15px 1px;\r\n\t\tmargin: 10px 0;\r\n\t\tborder-radius: 0;\r\n\t\tborder: none;\r\n\t\tbackground: #ffffff;\r\n\r\n\t\t.block-text {\r\n\t\t\tborder-color: #eeeeee;\r\n\t\t\tcolor: $ns-text-color-black;\r\n\t\t\tpadding: 7px 0;\r\n\t\t\tborder-bottom: 1px;\r\n\t\t}\r\n\t}\r\n\r\n\t.media-left {\r\n\t\ttext-align: center;\r\n\r\n\t\ti {\r\n\t\t\tfont-size: 65px;\r\n\t\t}\r\n\t}\r\n\r\n\t.payment-detail {\r\n\t\tpadding: 30px 0;\r\n\t\ttransition: 2s;\r\n\t}\r\n\r\n\t.media-right {\r\n\t\ttext-align: center;\r\n\t\tline-height: 65px;\r\n\t\tcursor: pointer;\r\n\r\n\t\ti.rotate {\r\n\t\t\ttransform: rotate(180deg);\r\n\t\t\ttransition: 0.3s;\r\n\t\t}\r\n\t}\r\n\r\n\t.payment-text {\r\n\t\tfont-size: 20px;\r\n\t}\r\n\r\n\t.payment-time {\r\n\t\tfont-size: 12px;\r\n\t\tline-height: 65px;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t//支付方式\r\n\t.order-submit {\r\n\t\tfloat: right;\r\n\t\tpadding: 10px;\r\n\t}\r\n\r\n\t.pay-type-list {\r\n\t\tpadding: 20px 0;\r\n\t}\r\n\r\n\t.pay-type-item {\r\n\t\tdisplay: inline-block;\r\n\t\tborder: 2px solid #eeeeee;\r\n\t\tpadding: 5px 20px;\r\n\t\tmargin-right: 20px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\t.pay-type-item.active {\r\n\t\tborder-color: $base-color;\r\n\t}\r\n\r\n\t.mobile-wrap {\r\n\t\twidth: 300px;\r\n\t}\r\n\r\n\t.order-info {\r\n\t\t.order-item {\r\n\t\t\tpadding: 1px 0;\r\n\r\n\t\t\t.item-label {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\twidth: 100px;\r\n\t\t\t}\r\n\r\n\t\t\t.item-value {\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.line {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 1px;\r\n\t\t\tbackground: #f2f2f2;\r\n\t\t\tmargin: 20px 0 10px 0;\r\n\t\t}\r\n\r\n\t\t.order-info-left {\r\n\t\t\theight: 1px;\r\n\t\t}\r\n\t}\r\n\r\n\t.wechatpay-box {\r\n\t\ttext-align: center;\r\n\r\n\t\timg {\r\n\t\t\twidth: 80%;\r\n\t\t}\r\n\t}\r\n\r\n\t.confirm-pay-wrap {\r\n\t\t.el-dialog__body {\r\n\t\t\tpadding: 10px 15px;\r\n\t\t}\r\n\r\n\t\t.info-wrap {\r\n\t\t\ti {\r\n\t\t\t\tposition: initial;\r\n\t\t\t\tvertical-align: middle;\r\n\t\t\t\ttransform: initial;\r\n\t\t\t}\r\n\r\n\t\t\tspan {\r\n\t\t\t\tvertical-align: middle;\r\n\t\t\t\tpadding: 0 10px;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\r\n<style lang=\"scss\">\r\n\t.confirm-pay-wrap {\r\n\t\t.el-dialog__body {\r\n\t\t\tpadding: 10px 15px;\r\n\t\t}\r\n\r\n\t\t.el-dialog__footer {\r\n\t\t\tpadding-top: 0;\r\n\t\t\tpadding-bottom: 10px;\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a95556aa&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=a95556aa&lang=scss&scoped=true&\"\nimport style1 from \"./index.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a95556aa\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=1&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=a95556aa&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=a95556aa&lang=scss&scoped=true&\""],"sourceRoot":""}